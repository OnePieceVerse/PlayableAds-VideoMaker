{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/ryonluo/Code/PlayableAllMaker/frontend/components/StepIndicator.tsx"],"sourcesContent":["import React from 'react';\n\ninterface Step {\n  id: number;\n  title: string;\n}\n\ninterface StepIndicatorProps {\n  steps: Step[];\n  currentStep: number;\n}\n\nconst StepIndicator: React.FC<StepIndicatorProps> = ({ steps, currentStep }) => {\n  return (\n    <div className=\"w-full\">\n      <div className=\"flex items-center justify-between mb-2\">\n        {steps.map((step, index) => (\n          <React.Fragment key={step.id}>\n            {/* Step Circle */}\n            <div className=\"flex flex-col items-center\">\n              <div \n                className={`w-10 h-10 rounded-full flex items-center justify-center ${\n                  step.id === currentStep\n                    ? 'bg-blue-600 text-white'\n                    : step.id < currentStep\n                    ? 'bg-green-500 text-white'\n                    : 'bg-gray-200 text-gray-600'\n                }`}\n              >\n                {step.id < currentStep ? (\n                  <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n                  </svg>\n                ) : (\n                  step.id\n                )}\n              </div>\n              <span className={`text-xs mt-2 ${\n                step.id === currentStep ? 'text-blue-600 font-medium' : 'text-gray-500'\n              }`}>\n                {step.title}\n              </span>\n            </div>\n            \n            {/* Connector Line (except after the last step) */}\n            {index < steps.length - 1 && (\n              <div className=\"flex-1 mx-2\">\n                <div className={`h-1 ${\n                  currentStep > index + 1 ? 'bg-green-500' : 'bg-gray-200'\n                }`}></div>\n              </div>\n            )}\n          </React.Fragment>\n        ))}\n      </div>\n    </div>\n  );\n};\n\nexport default StepIndicator; "],"names":[],"mappings":";;;;;AAAA;;;AAYA,MAAM,gBAA8C;QAAC,EAAE,KAAK,EAAE,WAAW,EAAE;IACzE,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YAAI,WAAU;sBACZ,MAAM,GAAG,CAAC,CAAC,MAAM,sBAChB,6LAAC,wKAAK,CAAC,QAAQ;;sCAEb,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCACC,WAAW,AAAC,2DAMX,OALC,KAAK,EAAE,KAAK,cACR,2BACA,KAAK,EAAE,GAAG,cACV,4BACA;8CAGL,KAAK,EAAE,GAAG,4BACT,6LAAC;wCAAI,WAAU;wCAAU,MAAK;wCAAO,QAAO;wCAAe,SAAQ;wCAAY,OAAM;kDACnF,cAAA,6LAAC;4CAAK,eAAc;4CAAQ,gBAAe;4CAAQ,aAAa;4CAAG,GAAE;;;;;;;;;;mFAGvE,KAAK,EAAE;;;;;;8CAGX,6LAAC;oCAAK,WAAW,AAAC,gBAEjB,OADC,KAAK,EAAE,KAAK,cAAc,8BAA8B;8CAEvD,KAAK,KAAK;;;;;;;;;;;;wBAKd,QAAQ,MAAM,MAAM,GAAG,mBACtB,6LAAC;4BAAI,WAAU;sCACb,cAAA,6LAAC;gCAAI,WAAW,AAAC,OAEhB,OADC,cAAc,QAAQ,IAAI,iBAAiB;;;;;;;;;;;;mBA/B9B,KAAK,EAAE;;;;;;;;;;;;;;;AAwCtC;KA7CM;uCA+CS","debugId":null}},
    {"offset": {"line": 107, "column": 0}, "map": {"version":3,"sources":["file:///Users/ryonluo/Code/PlayableAllMaker/frontend/components/steps/VideoUpload.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useRef, useEffect } from \"react\";\nimport { useDropzone } from \"react-dropzone\";\n\ninterface VideoUploadProps {\n  formData: any;\n  updateFormData: (field: string, value: any) => void;\n  nextStep: () => void;\n}\n\nconst VideoUpload: React.FC<VideoUploadProps> = ({\n  formData,\n  updateFormData,\n  nextStep,\n}) => {\n  const [uploading, setUploading] = useState(false);\n  const [uploadProgress, setUploadProgress] = useState(0);\n  const [error, setError] = useState<string | null>(null);\n  const [isLandscape, setIsLandscape] = useState(false);\n  const videoRef = useRef<HTMLVideoElement>(null);\n  const videoContainerRef = useRef<HTMLDivElement>(null);\n\n  // 当视频元数据加载完成后，根据宽高比自动设置方向\n  useEffect(() => {\n    if (formData.video && formData.video.metadata) {\n      const { width, height } = formData.video.metadata;\n      if (width && height) {\n        // 如果宽度大于高度，则为横屏，否则为竖屏\n        setIsLandscape(width > height);\n      }\n    }\n  }, [formData.video]);\n\n  const onDrop = async (acceptedFiles: File[]) => {\n    if (acceptedFiles.length === 0) return;\n\n    const file = acceptedFiles[0];\n    \n    // Check if file is a video\n    if (!file.type.startsWith(\"video/\")) {\n      setError(\"Please upload a video file\");\n      return;\n    }\n\n    try {\n      setError(null);\n      setUploading(true);\n      \n      // Simulate upload progress\n      const interval = setInterval(() => {\n        setUploadProgress((prev) => {\n          if (prev >= 95) {\n            clearInterval(interval);\n            return 95;\n          }\n          return prev + 5;\n        });\n      }, 100);\n\n      // Create form data for upload\n      const formData = new FormData();\n      formData.append(\"file\", file);\n      formData.append(\"type\", \"video\");\n      formData.append(\"step\", \"video\");\n\n      // Upload to backend API\n      const response = await fetch(\"http://localhost:8080/api/upload\", {\n        method: \"POST\",\n        body: formData,\n      });\n\n      clearInterval(interval);\n      setUploadProgress(100);\n\n      if (!response.ok) {\n        throw new Error(\"Failed to upload video\");\n      }\n\n      const data = await response.json();\n\n      if (!data.success) {\n        throw new Error(data.error || \"Failed to upload video\");\n      }\n\n      // Update form data with video information\n      updateFormData(\"video\", {\n        id: data.file_id,\n        url: `http://localhost:8080${data.url}`,\n        metadata: data.metadata,\n      });\n\n      // 根据视频宽高设置方向\n      if (data.metadata && data.metadata.width && data.metadata.height) {\n        // 如果宽度大于高度，则为横屏，否则为竖屏\n        setIsLandscape(data.metadata.width > data.metadata.height);\n      }\n\n      // Wait a moment to show 100% progress\n      setTimeout(() => {\n        setUploading(false);\n        setUploadProgress(0);\n      }, 500);\n\n    } catch (err: any) {\n      setError(err.message || \"An error occurred during upload\");\n      setUploading(false);\n      setUploadProgress(0);\n    }\n  };\n\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({\n    onDrop,\n    accept: {\n      'video/*': ['.mp4', '.webm', '.ogg']\n    },\n    disabled: uploading,\n    maxFiles: 1,\n  });\n\n  const handleContinue = () => {\n    if (formData.video) {\n      // 保存当前方向设置到formData\n      updateFormData(\"videoOrientation\", isLandscape ? \"landscape\" : \"portrait\");\n      nextStep();\n    } else {\n      setError(\"Please upload a video first\");\n    }\n  };\n\n  const toggleOrientation = () => {\n    setIsLandscape(!isLandscape);\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"text-center mb-6\">\n        <h2 className=\"text-2xl font-semibold text-gray-800\">Upload Video</h2>\n        <p className=\"text-gray-600\">\n          Upload the video you want to use for your playable ad\n        </p>\n      </div>\n\n      <div\n        {...getRootProps()}\n        className={`border-2 border-dashed rounded-lg p-8 text-center cursor-pointer transition-colors ${\n          isDragActive\n            ? \"border-blue-500 bg-blue-50\"\n            : \"border-gray-300 hover:border-blue-400\"\n        } ${uploading ? \"opacity-75\" : \"\"}`}\n      >\n        <input {...getInputProps()} />\n        <div className=\"space-y-4\">\n          <svg\n            className=\"mx-auto h-16 w-16 text-gray-400\"\n            fill=\"none\"\n            stroke=\"currentColor\"\n            viewBox=\"0 0 24 24\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n          >\n            <path\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              strokeWidth={1.5}\n              d=\"M7 4v16M17 4v16M3 8h18M3 16h18\"\n            />\n          </svg>\n          {uploading ? (\n            <div className=\"space-y-3\">\n              <p className=\"text-gray-700\">Uploading video...</p>\n              <div className=\"w-full bg-gray-200 rounded-full h-2.5\">\n                <div\n                  className=\"bg-blue-600 h-2.5 rounded-full transition-all\"\n                  style={{ width: `${uploadProgress}%` }}\n                ></div>\n              </div>\n              <p className=\"text-sm text-gray-500\">{uploadProgress}%</p>\n            </div>\n          ) : (\n            <div>\n              <p className=\"text-gray-700\">\n                {isDragActive\n                  ? \"Drop the video file here\"\n                  : \"Drag and drop your video here, or click to select\"}\n              </p>\n              <p className=\"text-sm text-gray-500 mt-2\">\n                Supported formats: MP4, WebM, OGG\n              </p>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {error && (\n        <div className=\"bg-red-50 text-red-600 p-3 rounded-md text-center\">\n          {error}\n        </div>\n      )}\n\n      {formData.video && (\n        <div className=\"mt-6\">\n          <div className=\"flex items-center justify-between mb-3\">\n            <h3 className=\"text-lg font-medium text-gray-800\">Preview</h3>\n            <button\n              onClick={toggleOrientation}\n              className=\"flex items-center px-3 py-1.5 bg-blue-100 text-blue-700 rounded-md hover:bg-blue-200 transition-colors\"\n            >\n              <svg\n                className=\"h-4 w-4 mr-1\"\n                fill=\"none\"\n                stroke=\"currentColor\"\n                viewBox=\"0 0 24 24\"\n                xmlns=\"http://www.w3.org/2000/svg\"\n              >\n                <path\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                  strokeWidth={2}\n                  d=\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\"\n                />\n              </svg>\n              {isLandscape ? \"Portrait Mode\" : \"Landscape Mode\"}\n            </button>\n          </div>\n          \n          <div \n            ref={videoContainerRef}\n            className={`bg-black rounded-lg overflow-hidden transition-all duration-300 ${\n              isLandscape \n                ? \"aspect-video\" \n                : \"aspect-[9/16] max-w-[400px] mx-auto\"\n            }`}\n          >\n            <video\n              ref={videoRef}\n              src={formData.video.url}\n              className=\"w-full h-full object-contain\"\n              controls\n              onSeeked={() => {\n                if (videoRef.current && videoRef.current.paused) {\n                  videoRef.current.play().catch(e => console.error('Auto play failed:', e));\n                }\n              }}\n            />\n          </div>\n          \n          <div className=\"mt-3 grid grid-cols-2 gap-4\">\n            <div className=\"text-sm text-gray-600\">\n              <p>\n                <span className=\"font-medium\">Duration:</span>{\" \"}\n                {formData.video.metadata?.duration\n                  ? `${formData.video.metadata.duration.toFixed(2)}s`\n                  : \"Unknown\"}\n              </p>\n              <p>\n                <span className=\"font-medium\">Size:</span>{\" \"}\n                {formData.video.metadata?.size\n                  ? `${(formData.video.metadata.size / (1024 * 1024)).toFixed(\n                      2\n                    )} MB`\n                  : \"Unknown\"}\n              </p>\n            </div>\n            <div className=\"text-sm text-gray-600\">\n              <p>\n                <span className=\"font-medium\">Resolution:</span>{\" \"}\n                {formData.video.metadata?.width && formData.video.metadata?.height\n                  ? `${formData.video.metadata.width} x ${formData.video.metadata.height}`\n                  : \"Unknown\"}\n              </p>\n              <p>\n                <span className=\"font-medium\">Format:</span>{\" \"}\n                {formData.video.metadata?.format || \"Unknown\"}\n              </p>\n            </div>\n          </div>\n        </div>\n      )}\n\n      <div className=\"flex justify-end pt-6\">\n        <button\n          onClick={handleContinue}\n          disabled={!formData.video || uploading}\n          className={`px-6 py-2 rounded-md text-white font-medium ${\n            !formData.video || uploading\n              ? \"bg-gray-400 cursor-not-allowed\"\n              : \"bg-blue-600 hover:bg-blue-700\"\n          }`}\n        >\n          Continue\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default VideoUpload; "],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 600, "column": 0}, "map": {"version":3,"sources":["file:///Users/ryonluo/Code/PlayableAllMaker/frontend/components/steps/PauseFrames.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useRef, useEffect } from \"react\";\nimport { useDropzone } from \"react-dropzone\";\n\ninterface PauseFrame {\n  id: string;\n  time: number;\n  image: {\n    id: string;\n    url: string;\n  };\n  position: {\n    left: number;\n    top: number;\n  };\n  scale: number; // 添加缩放比例属性\n}\n\ninterface PauseFramesProps {\n  formData: any;\n  updateFormData: (field: string, value: any) => void;\n  nextStep: () => void;\n  prevStep: () => void;\n}\n\nconst PauseFrames: React.FC<PauseFramesProps> = ({\n  formData,\n  updateFormData,\n  nextStep,\n  prevStep,\n}) => {\n  const [currentFrame, setCurrentFrame] = useState<PauseFrame | null>(null);\n  const [pauseTime, setPauseTime] = useState<number>(0);\n  const [position, setPosition] = useState({ left: 20, top: 20 });\n  const [scale, setScale] = useState<number>(1); // 添加缩放状态\n  const [uploading, setUploading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [isLandscape, setIsLandscape] = useState(false); // 添加横竖屏状态\n  const videoRef = useRef<HTMLVideoElement>(null);\n  const containerRef = useRef<HTMLDivElement>(null);\n  const [isDragging, setIsDragging] = useState(false);\n  const [isEditing, setIsEditing] = useState(false); // 添加编辑状态\n  const [editingFrame, setEditingFrame] = useState<PauseFrame | null>(null); // 添加正在编辑的帧\n  const [isDraggingSlider, setIsDraggingSlider] = useState(false); // 添加是否正在拖动滑块的状态\n  const [showFrameEditor, setShowFrameEditor] = useState(false); // 添加是否显示帧编辑器的状态\n  const [showFrameSelector, setShowFrameSelector] = useState(false); // 添加是否显示帧选择器的状态\n  const [isCopyingFrame, setIsCopyingFrame] = useState(false); // 添加是否正在复制帧的状态\n  const [showConfirmDialog, setShowConfirmDialog] = useState(false); // 添加确认弹框状态\n  const [confirmAction, setConfirmAction] = useState<(() => void) | null>(null); // 添加确认动作\n\n  // 当组件加载时，根据视频方向设置横竖屏状态\n  useEffect(() => {\n    // 每次都根据视频原始宽高判断，不保留之前的设置\n    if (formData.video && formData.video.metadata) {\n      const { width, height } = formData.video.metadata;\n      if (width && height) {\n        setIsLandscape(width > height);\n      }\n    }\n  }, [formData.video]);\n\n  // Check if we have a video\n  if (!formData.video) {\n    return (\n      <div className=\"text-center py-8\">\n        <p className=\"text-red-500\">Please upload a video first</p>\n        <button\n          onClick={prevStep}\n          className=\"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md\"\n        >\n          Go Back\n        </button>\n      </div>\n    );\n  }\n\n  // 当视频播放时更新时间\n  const handleVideoTimeUpdate = () => {\n    if (videoRef.current) {\n      setPauseTime(parseFloat(videoRef.current.currentTime.toFixed(2)));\n    }\n  };\n\n  // 当视频暂停时更新时间\n  const handleVideoPause = () => {\n    if (videoRef.current) {\n      setPauseTime(parseFloat(videoRef.current.currentTime.toFixed(2)));\n    }\n  };\n\n  // 处理时间滑块变化\n  const handleTimeChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const newTime = parseFloat(e.target.value);\n    setPauseTime(newTime);\n    if (videoRef.current) {\n      videoRef.current.currentTime = newTime;\n      // 拖动时暂停视频\n      videoRef.current.pause();\n    }\n    setIsDraggingSlider(true);\n  };\n\n  // 处理时间滑块释放\n  const handleTimeChangeEnd = () => {\n    setIsDraggingSlider(false);\n  };\n\n  // 处理位置滑块变化\n  const handlePositionChange = (\n    e: React.ChangeEvent<HTMLInputElement>,\n    axis: \"left\" | \"top\"\n  ) => {\n    const value = parseInt(e.target.value);\n    setPosition((prev) => ({\n      ...prev,\n      [axis]: value,\n    }));\n  };\n\n  // 处理缩放滑块变化\n  const handleScaleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const value = parseFloat(e.target.value);\n    setScale(value);\n  };\n\n  // 切换横竖屏\n  const toggleOrientation = () => {\n    setIsLandscape(!isLandscape);\n  };\n\n  // 拖拽开始\n  const startDrag = (e: React.MouseEvent<HTMLDivElement>) => {\n    if (!containerRef.current) return;\n    \n    setIsDragging(true);\n    \n    const containerRect = containerRef.current.getBoundingClientRect();\n    \n    const handleMouseMove = (moveEvent: MouseEvent) => {\n      if (!containerRef.current) return;\n      \n      const x = ((moveEvent.clientX - containerRect.left) / containerRect.width) * 100;\n      const y = ((moveEvent.clientY - containerRect.top) / containerRect.height) * 100;\n      \n      setPosition({\n        left: Math.max(0, Math.min(100, x)),\n        top: Math.max(0, Math.min(100, y)),\n      });\n    };\n    \n    const handleMouseUp = () => {\n      setIsDragging(false);\n      document.removeEventListener(\"mousemove\", handleMouseMove);\n      document.removeEventListener(\"mouseup\", handleMouseUp);\n    };\n    \n    document.addEventListener(\"mousemove\", handleMouseMove);\n    document.addEventListener(\"mouseup\", handleMouseUp);\n  };\n\n  // 文件上传处理\n  const onDrop = async (acceptedFiles: File[]) => {\n    if (acceptedFiles.length === 0) return;\n\n    const file = acceptedFiles[0];\n    \n    // Check if file is an image\n    if (!file.type.startsWith(\"image/\")) {\n      setError(\"Please upload an image file\");\n      return;\n    }\n\n    try {\n      setError(null);\n      setUploading(true);\n\n      // Create form data for upload\n      const formData = new FormData();\n      formData.append(\"file\", file);\n      formData.append(\"type\", \"image\");\n      formData.append(\"step\", \"pause\");\n\n      // Upload to backend API\n      const response = await fetch(\"http://localhost:8080/api/upload\", {\n        method: \"POST\",\n        body: formData,\n      });\n\n      if (!response.ok) {\n        throw new Error(\"Failed to upload image\");\n      }\n\n      const data = await response.json();\n\n      if (!data.success) {\n        throw new Error(data.error || \"Failed to upload image\");\n      }\n\n      // 如果是编辑模式，更新编辑中的帧\n      if (isEditing && editingFrame) {\n        const updatedFrame: PauseFrame = {\n          ...editingFrame,\n          image: {\n            id: data.file_id,\n            url: `http://localhost:8080${data.url}`,\n          }\n        };\n        setEditingFrame(updatedFrame);\n      } else {\n        // 创建新的暂停帧\n        const newFrame: PauseFrame = {\n          id: `frame_${Date.now()}`,\n          time: pauseTime,\n          image: {\n            id: data.file_id,\n            url: `http://localhost:8080${data.url}`,\n          },\n          position: { ...position },\n          scale: scale\n        };\n        setCurrentFrame(newFrame);\n      }\n      \n      setUploading(false);\n    } catch (err: any) {\n      setError(err.message || \"An error occurred during upload\");\n      setUploading(false);\n    }\n  };\n\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({\n    onDrop,\n    accept: {\n      'image/*': ['.png', '.jpg', '.jpeg', '.gif', '.webp']\n    },\n    disabled: uploading,\n    maxFiles: 1,\n  });\n\n  // 添加暂停帧\n  const addPauseFrame = () => {\n    if (!currentFrame) {\n      setError(\"Please upload a guide image first\");\n      return;\n    }\n\n    // 检查是否存在相同暂停时间的帧\n    const existingFrameWithSameTime = formData.pauseFrames.find(\n      (frame: PauseFrame) => Math.abs(frame.time - pauseTime) < 0.1\n    );\n\n    if (existingFrameWithSameTime) {\n      setError(`A pause frame already exists at ${pauseTime.toFixed(1)}s. Please adjust the pause time to continue.`);\n      return;\n    }\n\n    // 更新当前帧的所有值，包括最新的暂停时间\n    const updatedFrame: PauseFrame = {\n      ...currentFrame,\n      time: pauseTime,\n      position: { ...position },\n      scale: scale\n    };\n\n    // 添加当前帧到列表\n    const updatedFrames = [...formData.pauseFrames, updatedFrame];\n    updateFormData(\"pauseFrames\", updatedFrames);\n\n    // 重置当前帧\n    setCurrentFrame(null);\n    \n    // 隐藏帧编辑器\n    setShowFrameEditor(false);\n    \n    // 清除错误\n    setError(null);\n  };\n\n  // 创建新的暂停帧\n  const createNewPauseFrame = () => {\n    // 如果当前有未保存的帧，先提示保存\n    if (currentFrame) {\n      setConfirmAction(() => () => {\n        addPauseFrame();\n        // 重置位置和缩放\n        setPosition({ left: 20, top: 20 });\n        setScale(1);\n        \n        // 暂停视频\n        if (videoRef.current) {\n          videoRef.current.pause();\n        }\n        \n        // 清除编辑状态\n        setIsEditing(false);\n        setEditingFrame(null);\n        \n        // 显示帧编辑器\n        setShowFrameEditor(true);\n        \n        // 清除错误\n        setError(null);\n      });\n      setShowConfirmDialog(true);\n      return;\n    }\n    \n    // 重置位置和缩放\n    setPosition({ left: 20, top: 20 });\n    setScale(1);\n    \n    // 暂停视频\n    if (videoRef.current) {\n      videoRef.current.pause();\n    }\n    \n    // 清除编辑状态\n    setIsEditing(false);\n    setEditingFrame(null);\n    \n    // 显示帧编辑器\n    setShowFrameEditor(true);\n    \n    // 清除错误\n    setError(null);\n  };\n\n  // 复用指定帧的图片和配置\n  const copySpecifiedFrame = (frameToCopy: PauseFrame) => {\n    // 设置复制状态\n    setIsCopyingFrame(true);\n    \n    // 创建新的帧，复用指定帧的图片和配置\n    const newFrame: PauseFrame = {\n      id: `frame_${Date.now()}`,\n      time: frameToCopy.time,\n      image: { ...frameToCopy.image },\n      position: { ...frameToCopy.position },\n      scale: frameToCopy.scale || 1\n    };\n    \n    setCurrentFrame(newFrame);\n    setPauseTime(frameToCopy.time);\n    setPosition({ ...frameToCopy.position });\n    setScale(frameToCopy.scale || 1);\n    setShowFrameEditor(true);\n    setShowFrameSelector(false);\n    setError(null);\n    \n    // 将视频定位到指定帧的时间点，但不自动播放\n    if (videoRef.current) {\n      videoRef.current.currentTime = frameToCopy.time;\n      videoRef.current.pause();\n    }\n    \n    // 延迟重置复制状态\n    setTimeout(() => {\n      setIsCopyingFrame(false);\n    }, 1000);\n  };\n\n  // 显示帧选择器\n  const showCopyFrameSelector = () => {\n    if (formData.pauseFrames.length === 0) {\n      setError(\"No frames to copy\");\n      return;\n    }\n    setShowFrameSelector(true);\n  };\n\n  // 移除暂停帧\n  const removePauseFrame = (frameId: string) => {\n    const updatedFrames = formData.pauseFrames.filter(\n      (frame: PauseFrame) => frame.id !== frameId\n    );\n    updateFormData(\"pauseFrames\", updatedFrames);\n  };\n\n  // 编辑暂停帧\n  const editPauseFrame = (frame: PauseFrame) => {\n    // 如果当前有未保存的帧，先提示保存\n    if (currentFrame && !isEditing) {\n      setConfirmAction(() => {\n        if (window.confirm(\"You have an unsaved pause frame. Would you like to save it first?\")) {\n          addPauseFrame();\n          return () => {}; // No action needed after confirmation\n        } else {\n          setCurrentFrame(null);\n          return () => {}; // No action needed after cancellation\n        }\n      });\n    }\n    \n    // 将视频定位到帧的时间点\n    if (videoRef.current) {\n      videoRef.current.currentTime = frame.time;\n      videoRef.current.pause();\n    }\n    \n    // 设置编辑状态\n    setIsEditing(true);\n    setEditingFrame(frame);\n    setPauseTime(frame.time);\n    setPosition(frame.position);\n    setScale(frame.scale || 1);\n    setShowFrameEditor(true);\n  };\n\n  // 保存编辑\n  const saveEdit = () => {\n    if (!editingFrame) return;\n    \n    // 更新编辑中的帧\n    const updatedFrame: PauseFrame = {\n      ...editingFrame,\n      time: pauseTime,\n      position: { ...position },\n      scale: scale\n    };\n    \n    // 更新帧列表\n    const updatedFrames = formData.pauseFrames.map((frame: PauseFrame) => \n      frame.id === updatedFrame.id ? updatedFrame : frame\n    );\n    \n    updateFormData(\"pauseFrames\", updatedFrames);\n    \n    // 重置编辑状态\n    setIsEditing(false);\n    setEditingFrame(null);\n    setShowFrameEditor(false);\n  };\n\n  // 取消编辑\n  const cancelEdit = () => {\n    setIsEditing(false);\n    setEditingFrame(null);\n    setShowFrameEditor(false);\n  };\n\n  // 继续到下一步\n  const handleContinue = () => {\n    // 如果有当前帧未添加，则提示添加\n    if (currentFrame) {\n      setConfirmAction(() => {\n        if (window.confirm(\"You have an unsaved pause frame. Would you like to save it before continuing?\")) {\n          addPauseFrame();\n          return () => {}; // No action needed after confirmation\n        } else {\n          return () => {}; // No action needed after cancellation\n        }\n      });\n    }\n\n    nextStep();\n  };\n\n  // 当视频被拖动后自动播放\n  const handleVideoSeeked = () => {\n    // 只有在非拖动滑块状态且非复制帧状态下才自动播放\n    if (!isDraggingSlider && !isCopyingFrame && videoRef.current && videoRef.current.paused) {\n      videoRef.current.play().catch(e => console.error('Auto play failed:', e));\n    }\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"text-center mb-6\">\n        <h2 className=\"text-2xl font-semibold text-gray-800\">\n          Add Pause Frames\n        </h2>\n        <p className=\"text-gray-600\">\n          Set points where the video will pause and show a guide image\n        </p>\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n        <div>\n          <div className=\"flex items-center justify-between mb-3\">\n            <h3 className=\"text-lg font-medium text-gray-800\">Video</h3>\n            <button\n              onClick={toggleOrientation}\n              className=\"flex items-center px-3 py-1.5 bg-blue-100 text-blue-700 rounded-md hover:bg-blue-200 transition-colors shadow-md\"\n            >\n              <svg\n                className=\"h-4 w-4 mr-1\"\n                fill=\"none\"\n                stroke=\"currentColor\"\n                viewBox=\"0 0 24 24\"\n                xmlns=\"http://www.w3.org/2000/svg\"\n              >\n                <path\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                  strokeWidth={2}\n                  d=\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\"\n                />\n              </svg>\n              {isLandscape ? \"Portrait Mode\" : \"Landscape Mode\"}\n            </button>\n          </div>\n          \n          <div \n            ref={containerRef}\n            className={`bg-black rounded-lg overflow-hidden relative transition-all duration-300 ${\n              isLandscape \n                ? \"aspect-video\" \n                : \"aspect-[9/16] max-w-[400px] mx-auto\"\n            }`}\n          >\n            <video\n              ref={videoRef}\n              src={formData.video.url}\n              className=\"w-full h-full object-contain pointer-events-none\"\n              onTimeUpdate={handleVideoTimeUpdate}\n              onPause={handleVideoPause}\n              onSeeked={handleVideoSeeked}\n            />\n            \n            {/* 当前帧预览 */}\n            {currentFrame && (\n              <div\n                className={`absolute cursor-move ${isDragging ? 'pointer-events-none' : ''}`}\n                style={{\n                  left: `${position.left}%`,\n                  top: `${position.top}%`,\n                  transform: `translate(-50%, -50%) scale(${scale})`,\n                  maxWidth: '30%',\n                  maxHeight: '30%'\n                }}\n                onMouseDown={startDrag}\n              >\n                <img \n                  src={currentFrame.image.url} \n                  alt=\"Guide\" \n                  className=\"max-w-full max-h-full pointer-events-none\"\n                />\n              </div>\n            )}\n            \n            {/* 编辑中的帧预览 */}\n            {isEditing && editingFrame && (\n              <div\n                className={`absolute cursor-move ${isDragging ? 'pointer-events-none' : ''}`}\n                style={{\n                  left: `${position.left}%`,\n                  top: `${position.top}%`,\n                  transform: `translate(-50%, -50%) scale(${scale})`,\n                  maxWidth: '30%',\n                  maxHeight: '30%'\n                }}\n                onMouseDown={startDrag}\n              >\n                <img \n                  src={editingFrame.image.url} \n                  alt=\"Guide\" \n                  className=\"max-w-full max-h-full pointer-events-none\"\n                />\n              </div>\n            )}\n          </div>\n\n          <div className=\"mt-4 space-y-4\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                Pause Time (seconds)\n              </label>\n              <input\n                type=\"range\"\n                min=\"0\"\n                max={formData.video.metadata?.duration || 30}\n                step=\"0.1\"\n                value={pauseTime}\n                onChange={handleTimeChange}\n                onMouseUp={handleTimeChangeEnd}\n                onTouchEnd={handleTimeChangeEnd}\n                className=\"w-full\"\n              />\n              <div className=\"flex justify-between\">\n                <span className=\"text-xs text-gray-500\">0s</span>\n                <span className=\"text-xs text-gray-500 font-medium\">\n                  {pauseTime.toFixed(1)}s\n                </span>\n                <span className=\"text-xs text-gray-500\">\n                  {(formData.video.metadata?.duration || 30).toFixed(1)}s\n                </span>\n              </div>\n            </div>\n\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  Left Position (%)\n                </label>\n                <input\n                  type=\"range\"\n                  min=\"0\"\n                  max=\"100\"\n                  value={position.left}\n                  onChange={(e) => handlePositionChange(e, \"left\")}\n                  className={`w-full ${!currentFrame && !editingFrame ? 'opacity-50 cursor-not-allowed' : ''}`}\n                  disabled={!currentFrame && !editingFrame}\n                />\n                <div className=\"text-center text-xs text-gray-500 font-medium\">\n                  {position.left.toFixed(0)}%\n                </div>\n              </div>\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  Top Position (%)\n                </label>\n                <input\n                  type=\"range\"\n                  min=\"0\"\n                  max=\"100\"\n                  value={position.top}\n                  onChange={(e) => handlePositionChange(e, \"top\")}\n                  className={`w-full ${!currentFrame && !editingFrame ? 'opacity-50 cursor-not-allowed' : ''}`}\n                  disabled={!currentFrame && !editingFrame}\n                />\n                <div className=\"text-center text-xs text-gray-500 font-medium\">\n                  {position.top.toFixed(0)}%\n                </div>\n              </div>\n            </div>\n            \n            {/* 添加图片缩放控制 */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                Image Scale\n                {!currentFrame && !editingFrame && (\n                  <span className=\"text-xs text-gray-500 ml-2\">(Upload an image first to adjust scale)</span>\n                )}\n              </label>\n              <input\n                type=\"range\"\n                min=\"0.1\"\n                max=\"2\"\n                step=\"0.1\"\n                value={scale}\n                onChange={handleScaleChange}\n                className={`w-full ${!currentFrame && !editingFrame ? 'opacity-50 cursor-not-allowed' : ''}`}\n                disabled={!currentFrame && !editingFrame}\n              />\n              <div className=\"flex justify-between text-xs text-gray-500\">\n                <span>Smaller (0.1x)</span>\n                <span className=\"font-medium\">{scale.toFixed(1)}x</span>\n                <span>Larger (2x)</span>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div>\n          <div className=\"flex items-center justify-between mb-3\">\n            <h3 className=\"text-lg font-medium text-gray-800\">\n              Pause Frames ({formData.pauseFrames.length})\n            </h3>\n          </div>\n          \n          {/* 简化的操作区域 */}\n          <div className=\"bg-gray-50 rounded-lg p-4 mb-4\">\n            <div className=\"flex flex-col sm:flex-row gap-3\">\n              <button\n                onClick={createNewPauseFrame}\n                className=\"flex-1 flex items-center justify-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors\"\n              >\n                <svg\n                  className=\"h-4 w-4 mr-2\"\n                  fill=\"none\"\n                  stroke=\"currentColor\"\n                  viewBox=\"0 0 24 24\"\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                >\n                  <path\n                    strokeLinecap=\"round\"\n                    strokeLinejoin=\"round\"\n                    strokeWidth={2}\n                    d=\"M12 6v6m0 0v6m0-6h6m-6 0H6\"\n                  />\n                </svg>\n                Create New Frame\n              </button>\n              \n              {formData.pauseFrames.length > 0 && (\n                <button\n                  onClick={showCopyFrameSelector}\n                  className=\"flex-1 flex items-center justify-center px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors\"\n                >\n                  <svg\n                    className=\"h-4 w-4 mr-2\"\n                    fill=\"none\"\n                    stroke=\"currentColor\"\n                    viewBox=\"0 0 24 24\"\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                  >\n                    <path\n                      strokeLinecap=\"round\"\n                      strokeLinejoin=\"round\"\n                      strokeWidth={2}\n                      d=\"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\"\n                    />\n                  </svg>\n                  Copy Frame\n                </button>\n              )}\n            </div>\n            \n            <p className=\"text-xs text-gray-600 mt-2 text-center\">\n              {formData.pauseFrames.length === 0 \n                ? \"Click 'Create New Frame' to add your first pause frame\"\n                : \"Create a new frame or copy settings from an existing frame\"\n              }\n            </p>\n          </div>\n\n          {/* 帧选择器 - 只在需要时显示 */}\n          {showFrameSelector && (\n            <div className=\"bg-white border border-gray-200 rounded-lg p-4 mb-4\">\n              <h4 className=\"text-sm font-medium text-gray-800 mb-3\">\n                Select Frame to Copy\n              </h4>\n              \n              <div className=\"space-y-2 max-h-48 overflow-y-auto\">\n                {formData.pauseFrames.map((frame: PauseFrame, index: number) => (\n                  <button\n                    key={frame.id}\n                    onClick={() => copySpecifiedFrame(frame)}\n                    className=\"w-full flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors text-left\"\n                  >\n                    <div className=\"h-10 w-10 flex-shrink-0 rounded overflow-hidden bg-gray-200 border border-gray-300 flex items-center justify-center\">\n                      <img\n                        src={frame.image.url}\n                        alt=\"Frame preview\"\n                        className=\"max-h-full max-w-full object-contain\"\n                      />\n                    </div>\n                    <div className=\"ml-3 flex-grow min-w-0\">\n                      <p className=\"text-sm font-medium text-gray-800 truncate\">\n                        Frame #{index + 1} ({frame.time.toFixed(1)}s)\n                      </p>\n                      <p className=\"text-xs text-gray-500 truncate\">\n                        Position: {frame.position.left.toFixed(0)}% left, {frame.position.top.toFixed(0)}% top • Scale: {frame.scale ? `${frame.scale.toFixed(1)}x` : '1.0x'}\n                      </p>\n                    </div>\n                    <svg\n                      className=\"h-4 w-4 text-gray-400 flex-shrink-0\"\n                      fill=\"none\"\n                      stroke=\"currentColor\"\n                      viewBox=\"0 0 24 24\"\n                      xmlns=\"http://www.w3.org/2000/svg\"\n                    >\n                      <path\n                        strokeLinecap=\"round\"\n                        strokeLinejoin=\"round\"\n                        strokeWidth={2}\n                        d=\"M9 5l7 7-7 7\"\n                      />\n                    </svg>\n                  </button>\n                ))}\n              </div>\n              \n              <div className=\"mt-3 flex justify-end\">\n                <button\n                  onClick={() => setShowFrameSelector(false)}\n                  className=\"px-3 py-1 text-sm text-gray-600 hover:text-gray-800\"\n                >\n                  Cancel\n                </button>\n              </div>\n            </div>\n          )}\n          \n          {/* 图片上传区域 - 只在需要时显示 */}\n          {showFrameEditor && (\n            <div className=\"bg-white border border-gray-200 rounded-lg p-4 mb-4\">\n              <div className=\"flex items-center justify-between mb-3\">\n                <h4 className=\"text-sm font-medium text-gray-800\">\n                  {isEditing ? \"Edit Frame Image\" : \"Upload Guide Image\"}\n                </h4>\n                <button\n                  onClick={() => {\n                    setShowFrameEditor(false);\n                    setCurrentFrame(null);\n                    setIsEditing(false);\n                    setEditingFrame(null);\n                    setError(null);\n                  }}\n                  className=\"px-4 py-2 bg-red-100 text-red-700 rounded-md hover:bg-red-200 transition-colors font-medium text-sm\"\n                >\n                  Cancel\n                </button>\n              </div>\n              \n              <div\n                {...getRootProps()}\n                className={`border-2 border-dashed rounded-lg p-6 text-center cursor-pointer transition-colors ${\n                  isDragActive\n                    ? \"border-blue-500 bg-blue-50\"\n                    : \"border-gray-300 hover:border-blue-400\"\n                } ${uploading ? \"opacity-75\" : \"\"}`}\n              >\n                <input {...getInputProps()} />\n                <div className=\"space-y-2\">\n                  <svg\n                    className=\"mx-auto h-8 w-8 text-gray-400\"\n                    fill=\"none\"\n                    stroke=\"currentColor\"\n                    viewBox=\"0 0 24 24\"\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                  >\n                    <path\n                      strokeLinecap=\"round\"\n                      strokeLinejoin=\"round\"\n                      strokeWidth={1.5}\n                      d=\"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z\"\n                    />\n                  </svg>\n                  {uploading ? (\n                    <p className=\"text-gray-700\">Uploading image...</p>\n                  ) : (\n                    <p className=\"text-gray-700\">\n                      {isDragActive\n                        ? \"Drop the image here\"\n                        : \"Drag and drop your guide image here, or click to select\"}\n                    </p>\n                  )}\n                  <p className=\"text-xs text-gray-500\">\n                    Supported formats: PNG, JPG, GIF, WebP\n                  </p>\n                </div>\n              </div>\n\n              {/* 图片预览和信息 */}\n              {(currentFrame || (isEditing && editingFrame)) && (\n                <div className=\"mt-4 bg-gray-50 rounded-lg p-4\">\n                  <h5 className=\"text-sm font-medium text-gray-800 mb-3\">Image Preview</h5>\n                  <div className=\"flex items-start space-x-4\">\n                    <div className=\"h-20 w-20 flex-shrink-0 rounded overflow-hidden bg-gray-200 border border-gray-300 flex items-center justify-center\">\n                      <img\n                        src={(currentFrame || editingFrame)?.image.url}\n                        alt=\"Guide preview\"\n                        className=\"max-h-full max-w-full object-contain\"\n                      />\n                    </div>\n                    <div className=\"flex-grow min-w-0\">\n                      <div className=\"grid grid-cols-2 gap-2 text-xs\">\n                        <div>\n                          <p className=\"text-gray-500\">Time:</p>\n                          <p className=\"font-medium\">{pauseTime.toFixed(1)}s</p>\n                        </div>\n                        <div>\n                          <p className=\"text-gray-500\">Position:</p>\n                          <p className=\"font-medium\">{position.left.toFixed(0)}% left, {position.top.toFixed(0)}% top</p>\n                        </div>\n                        <div>\n                          <p className=\"text-gray-500\">Scale:</p>\n                          <p className=\"font-medium\">{scale.toFixed(1)}x</p>\n                        </div>\n                        <div>\n                          <p className=\"text-gray-500\">Status:</p>\n                          <p className=\"font-medium text-green-600\">\n                            {isEditing ? \"Editing\" : \"Ready to add\"}\n                          </p>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              )}\n\n              {error && (\n                <div className=\"mt-3 bg-red-50 text-red-600 p-3 rounded-md text-center text-sm\">\n                  {error}\n                </div>\n              )}\n\n              {/* 操作按钮 */}\n              <div className=\"mt-4 flex space-x-3\">\n                {isEditing ? (\n                  <>\n                    <button\n                      onClick={saveEdit}\n                      className=\"flex-1 py-2 rounded-md font-medium bg-green-600 text-white hover:bg-green-700\"\n                    >\n                      Save Changes\n                    </button>\n                    <button\n                      onClick={cancelEdit}\n                      className=\"flex-1 py-2 rounded-md font-medium border border-gray-300 text-gray-700 hover:bg-gray-50\"\n                    >\n                      Cancel\n                    </button>\n                  </>\n                ) : (\n                  <button\n                    onClick={addPauseFrame}\n                    disabled={!currentFrame || uploading}\n                    className={`flex-1 py-2 rounded-md font-medium ${\n                      !currentFrame || uploading\n                        ? \"bg-gray-200 text-gray-500 cursor-not-allowed\"\n                        : \"bg-green-600 text-white hover:bg-green-700\"\n                    }`}\n                  >\n                    {!currentFrame ? \"Upload Image First\" : \"Add This Frame\"}\n                  </button>\n                )}\n              </div>\n            </div>\n          )}\n\n          {/* 已添加的帧列表 */}\n          {formData.pauseFrames.length > 0 && (\n            <div className=\"space-y-3\">\n              <h4 className=\"text-sm font-medium text-gray-800\">Your Pause Frames</h4>\n              <div className=\"space-y-3 max-h-[300px] overflow-y-auto pr-2\">\n                {formData.pauseFrames.map((frame: PauseFrame, index: number) => (\n                  <div\n                    key={frame.id}\n                    className=\"bg-white border border-gray-200 rounded-lg shadow-sm overflow-hidden\"\n                  >\n                    <div className=\"bg-gray-50 px-4 py-2 border-b border-gray-200 flex justify-between items-center\">\n                      <div className=\"font-medium text-gray-700\">\n                        Frame #{index + 1} <span className=\"text-sm font-normal text-gray-500\">({frame.time.toFixed(1)}s)</span>\n                      </div>\n                      <div className=\"flex space-x-1\">\n                        <button\n                          onClick={() => editPauseFrame(frame)}\n                          className=\"p-1 text-blue-500 hover:text-blue-700\"\n                          title=\"Edit frame\"\n                        >\n                          <svg\n                            className=\"h-4 w-4\"\n                            fill=\"none\"\n                            stroke=\"currentColor\"\n                            viewBox=\"0 0 24 24\"\n                            xmlns=\"http://www.w3.org/2000/svg\"\n                          >\n                            <path\n                              strokeLinecap=\"round\"\n                              strokeLinejoin=\"round\"\n                              strokeWidth={1.5}\n                              d=\"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z\"\n                            />\n                          </svg>\n                        </button>\n                        <button\n                          onClick={() => removePauseFrame(frame.id)}\n                          className=\"p-1 text-red-500 hover:text-red-700\"\n                          title=\"Delete frame\"\n                        >\n                          <svg\n                            className=\"h-4 w-4\"\n                            fill=\"none\"\n                            stroke=\"currentColor\"\n                            viewBox=\"0 0 24 24\"\n                            xmlns=\"http://www.w3.org/2000/svg\"\n                          >\n                            <path\n                              strokeLinecap=\"round\"\n                              strokeLinejoin=\"round\"\n                              strokeWidth={1.5}\n                              d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\"\n                            />\n                          </svg>\n                        </button>\n                      </div>\n                    </div>\n                    <div className=\"p-3 flex items-start\">\n                      <div className=\"h-12 w-12 flex-shrink-0 rounded overflow-hidden bg-gray-200 border border-gray-300 flex items-center justify-center\">\n                        <img\n                          src={frame.image.url}\n                          alt=\"Guide\"\n                          className=\"max-h-full max-w-full object-contain\"\n                        />\n                      </div>\n                      <div className=\"ml-3 flex-grow min-w-0\">\n                        <div className=\"grid grid-cols-2 gap-2 text-xs\">\n                          <div>\n                            <p className=\"text-gray-500\">Position:</p>\n                            <p className=\"font-medium truncate\">{frame.position.left.toFixed(0)}% left, {frame.position.top.toFixed(0)}% top</p>\n                          </div>\n                          <div>\n                            <p className=\"text-gray-500\">Scale:</p>\n                            <p className=\"font-medium\">{frame.scale ? `${frame.scale.toFixed(1)}x` : '1.0x'}</p>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n\n      <div className=\"flex justify-between pt-6\">\n        <button\n          onClick={prevStep}\n          className=\"px-6 py-2 rounded-md text-gray-700 font-medium border border-gray-300 hover:bg-gray-50\"\n        >\n          Back\n        </button>\n        <button\n          onClick={handleContinue}\n          className=\"px-6 py-2 rounded-md text-white font-medium bg-blue-600 hover:bg-blue-700\"\n        >\n          Continue\n        </button>\n      </div>\n\n      {/* 确认弹框 */}\n      {showConfirmDialog && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <div className=\"bg-white rounded-lg p-6 max-w-md mx-4\">\n            <h3 className=\"text-lg font-medium text-gray-900 mb-4\">\n              Unsaved Changes\n            </h3>\n            <p className=\"text-gray-600 mb-6\">\n              You have an unsaved pause frame. Would you like to save it first?\n            </p>\n            <div className=\"flex space-x-3\">\n              <button\n                onClick={() => {\n                  if (confirmAction) {\n                    confirmAction();\n                  }\n                  setShowConfirmDialog(false);\n                  setConfirmAction(null);\n                }}\n                className=\"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors\"\n              >\n                Save & Continue\n              </button>\n              <button\n                onClick={() => {\n                  setCurrentFrame(null);\n                  setShowConfirmDialog(false);\n                  setConfirmAction(null);\n                  // 重置位置和缩放\n                  setPosition({ left: 20, top: 20 });\n                  setScale(1);\n                  \n                  // 暂停视频\n                  if (videoRef.current) {\n                    videoRef.current.pause();\n                  }\n                  \n                  // 清除编辑状态\n                  setIsEditing(false);\n                  setEditingFrame(null);\n                  \n                  // 显示帧编辑器\n                  setShowFrameEditor(true);\n                  \n                  // 清除错误\n                  setError(null);\n                }}\n                className=\"flex-1 px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition-colors\"\n              >\n                Discard\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default PauseFrames; "],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2358, "column": 0}, "map": {"version":3,"sources":["file:///Users/ryonluo/Code/PlayableAllMaker/frontend/components/steps/CTAButtons.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useRef, useEffect } from \"react\";\nimport { useDropzone } from \"react-dropzone\";\n\ninterface CTAButton {\n  id: string;\n  type: \"fulltime\" | \"endscreen\";\n  image: {\n    id: string;\n    url: string;\n  };\n  position: {\n    left: number;\n    top: number;\n  };\n  scale: number; // 添加缩放比例属性\n  startTime?: number;\n}\n\ninterface CTAButtonsProps {\n  formData: any;\n  updateFormData: (field: string, value: any) => void;\n  nextStep: () => void;\n  prevStep: () => void;\n}\n\nconst CTAButtons: React.FC<CTAButtonsProps> = ({\n  formData,\n  updateFormData,\n  nextStep,\n  prevStep,\n}) => {\n  const [currentButton, setCurrentButton] = useState<CTAButton | null>(null);\n  const [buttonType, setButtonType] = useState<\"fulltime\" | \"endscreen\">(\"fulltime\");\n  const [position, setPosition] = useState({ left: 50, top: 80 });\n  const [scale, setScale] = useState<number>(1); // 添加缩放状态\n  const [startTime, setStartTime] = useState<number>(0);\n  const [uploading, setUploading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [isLandscape, setIsLandscape] = useState(false); // 添加横竖屏状态\n  const [isDraggingSlider, setIsDraggingSlider] = useState(false); // 添加是否正在拖动滑块的状态\n  const videoRef = useRef<HTMLVideoElement>(null);\n  const containerRef = useRef<HTMLDivElement>(null);\n  const [isDragging, setIsDragging] = useState(false);\n  const [selectedButtonType, setSelectedButtonType] = useState<\"fulltime\" | \"endscreen\" | null>(null);\n  const [editingButton, setEditingButton] = useState<CTAButton | null>(null); // 添加编辑状态\n\n  // 当组件加载时，根据视频方向设置横竖屏状态\n  useEffect(() => {\n    // 每次都根据视频原始宽高判断，不保留之前的设置\n    if (formData.video && formData.video.metadata) {\n      const { width, height } = formData.video.metadata;\n      if (width && height) {\n        setIsLandscape(width > height);\n      }\n    }\n  }, [formData.video]);\n\n  // Check if we have a video\n  if (!formData.video) {\n    return (\n      <div className=\"text-center py-8\">\n        <p className=\"text-red-500\">Please upload a video first</p>\n        <button\n          onClick={prevStep}\n          className=\"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md\"\n        >\n          Go Back\n        </button>\n      </div>\n    );\n  }\n\n  const handleVideoTimeUpdate = () => {\n    if (videoRef.current) {\n      setStartTime(parseFloat(videoRef.current.currentTime.toFixed(2)));\n    }\n  };\n\n  const handleVideoPause = () => {\n    if (videoRef.current) {\n      setStartTime(parseFloat(videoRef.current.currentTime.toFixed(2)));\n    }\n  };\n\n  const handleTimeChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const newTime = parseFloat(e.target.value);\n    setStartTime(newTime);\n    if (videoRef.current) {\n      videoRef.current.currentTime = newTime;\n      // 拖动时暂停视频\n      videoRef.current.pause();\n    }\n    setIsDraggingSlider(true);\n  };\n\n  // 处理时间滑块释放\n  const handleTimeChangeEnd = () => {\n    setIsDraggingSlider(false);\n  };\n\n  const handlePositionChange = (\n    e: React.ChangeEvent<HTMLInputElement>,\n    axis: \"left\" | \"top\"\n  ) => {\n    const value = parseInt(e.target.value);\n    setPosition((prev) => ({\n      ...prev,\n      [axis]: value,\n    }));\n  };\n\n  // 处理缩放滑块变化\n  const handleScaleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const value = parseFloat(e.target.value);\n    setScale(value);\n  };\n\n  // 切换横竖屏\n  const toggleOrientation = () => {\n    setIsLandscape(!isLandscape);\n  };\n\n  const startDrag = (e: React.MouseEvent<HTMLDivElement>) => {\n    if (!containerRef.current) return;\n    \n    setIsDragging(true);\n    \n    const containerRect = containerRef.current.getBoundingClientRect();\n    \n    const handleMouseMove = (moveEvent: MouseEvent) => {\n      if (!containerRef.current) return;\n      \n      const x = ((moveEvent.clientX - containerRect.left) / containerRect.width) * 100;\n      const y = ((moveEvent.clientY - containerRect.top) / containerRect.height) * 100;\n      \n      setPosition({\n        left: Math.max(0, Math.min(100, x)),\n        top: Math.max(0, Math.min(100, y)),\n      });\n    };\n    \n    const handleMouseUp = () => {\n      setIsDragging(false);\n      document.removeEventListener(\"mousemove\", handleMouseMove);\n      document.removeEventListener(\"mouseup\", handleMouseUp);\n    };\n    \n    document.addEventListener(\"mousemove\", handleMouseMove);\n    document.addEventListener(\"mouseup\", handleMouseUp);\n  };\n\n  const onDrop = async (acceptedFiles: File[]) => {\n    if (acceptedFiles.length === 0) return;\n\n    const file = acceptedFiles[0];\n    \n    // Check if file is an image\n    if (!file.type.startsWith(\"image/\")) {\n      setError(\"Please upload an image file\");\n      return;\n    }\n\n    try {\n      setError(null);\n      setUploading(true);\n\n      // Create form data for upload\n      const formData = new FormData();\n      formData.append(\"file\", file);\n      formData.append(\"type\", \"image\");\n      formData.append(\"step\", \"cta\");\n\n      // Upload to backend API\n      const response = await fetch(\"http://localhost:8080/api/upload\", {\n        method: \"POST\",\n        body: formData,\n      });\n\n      if (!response.ok) {\n        throw new Error(\"Failed to upload image\");\n      }\n\n      const data = await response.json();\n\n      if (!data.success) {\n        throw new Error(data.error || \"Failed to upload image\");\n      }\n\n      // Create a new CTA button\n      const newButton: CTAButton = {\n        id: `button_${Date.now()}`,\n        type: selectedButtonType || buttonType,\n        image: {\n          id: data.file_id,\n          url: `http://localhost:8080${data.url}`,\n        },\n        position: { ...position },\n        scale: 1, // 默认缩放比例\n      };\n\n      if ((selectedButtonType || buttonType) === \"endscreen\") {\n        newButton.startTime = startTime;\n        // 如果是 End Screen 按钮，禁止视频播放\n        if (videoRef.current) {\n          videoRef.current.pause();\n        }\n      } else {\n        // 如果是 Full-time 按钮，将视频重置到开始时间并禁止播放\n        if (videoRef.current) {\n          videoRef.current.currentTime = 0;\n          videoRef.current.pause();\n        }\n        setStartTime(0);\n      }\n\n      setCurrentButton(newButton);\n      setUploading(false);\n    } catch (err: any) {\n      setError(err.message || \"An error occurred during upload\");\n      setUploading(false);\n    }\n  };\n\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({\n    onDrop,\n    accept: {\n      'image/*': ['.png', '.jpg', '.jpeg', '.gif', '.webp']\n    },\n    disabled: uploading,\n    maxFiles: 1,\n  });\n\n  const addCTAButton = () => {\n    if (!currentButton) {\n      setError(\"Please upload a CTA button image first\");\n      return;\n    }\n\n    const buttonTypeToAdd = selectedButtonType || buttonType;\n\n    // 检查是否已存在同类型的按钮\n    const existingButtonOfSameType = formData.ctaButtons.find(\n      (button: CTAButton) => button.type === buttonTypeToAdd\n    );\n\n    if (existingButtonOfSameType) {\n      setError(`A ${buttonTypeToAdd === \"fulltime\" ? \"Full-time\" : \"End Screen\"} button already exists. You can only add one button of each type.`);\n      return;\n    }\n\n    // 验证 End Screen 按钮的时间\n    if (buttonTypeToAdd === \"endscreen\" && startTime === 0) {\n      setError(\"End Screen button cannot start at 0s. Please set a valid time (minimum 0.1s).\");\n      return;\n    }\n\n    // 更新当前按钮的所有值，确保类型正确\n    const updatedButton: CTAButton = {\n      ...currentButton,\n      type: buttonTypeToAdd,\n      scale: scale\n    };\n\n    // 如果是 End Screen 按钮，确保包含开始时间\n    if (buttonTypeToAdd === \"endscreen\") {\n      updatedButton.startTime = startTime;\n    }\n\n    // Add the current button to the list\n    const updatedButtons = [...formData.ctaButtons, updatedButton];\n    updateFormData(\"ctaButtons\", updatedButtons);\n\n    // Reset current button and selected type\n    setCurrentButton(null);\n    setSelectedButtonType(null);\n    setError(null);\n  };\n\n  const removeCTAButton = (buttonId: string) => {\n    const updatedButtons = formData.ctaButtons.filter(\n      (button: CTAButton) => button.id !== buttonId\n    );\n    updateFormData(\"ctaButtons\", updatedButtons);\n  };\n\n  const editCTAButton = (button: CTAButton) => {\n    setEditingButton(button);\n    setCurrentButton(button);\n    setButtonType(button.type);\n    setPosition({ left: button.position.left, top: button.position.top });\n    setScale(button.scale);\n    setStartTime(button.startTime || 0);\n    setSelectedButtonType(button.type);\n  };\n\n  const saveEdit = () => {\n    if (!editingButton || !currentButton) return;\n\n    // 验证 End Screen 按钮的时间\n    if (editingButton.type === \"endscreen\" && startTime === 0) {\n      setError(\"End Screen button cannot start at 0s. Please set a valid time.\");\n      return;\n    }\n\n    const updatedButton: CTAButton = {\n      ...editingButton,\n      position: { ...position },\n      scale: scale,\n      startTime: editingButton.type === \"endscreen\" ? startTime : undefined\n    };\n\n    const updatedButtons = formData.ctaButtons.map((btn: CTAButton) => \n      btn.id === editingButton.id ? updatedButton : btn\n    );\n\n    updateFormData(\"ctaButtons\", updatedButtons);\n    setEditingButton(null);\n    setCurrentButton(null);\n    setSelectedButtonType(null);\n    setError(null);\n  };\n\n  const cancelEdit = () => {\n    setEditingButton(null);\n    setCurrentButton(null);\n    setSelectedButtonType(null);\n    setError(null);\n  };\n\n  const handleContinue = () => {\n    // 检查是否添加了两个 CTA 按钮\n    const fulltimeButtons = formData.ctaButtons.filter((button: CTAButton) => button.type === \"fulltime\");\n    const endscreenButtons = formData.ctaButtons.filter((button: CTAButton) => button.type === \"endscreen\");\n    \n    if (fulltimeButtons.length === 0) {\n      setError(\"Please add at least one Full-time CTA button\");\n      return;\n    }\n    \n    if (endscreenButtons.length === 0) {\n      setError(\"Please add at least one End Screen CTA button\");\n      return;\n    }\n\n    // If there's a current button that hasn't been added yet, add it\n    if (currentButton) {\n      if (window.confirm(\"You have an unsaved CTA button. Would you like to save it before continuing?\")) {\n        addCTAButton();\n      }\n    }\n\n    nextStep();\n  };\n\n  // 当视频被拖动后自动播放\n  const handleVideoSeeked = () => {\n    // 只有在非拖动滑块状态下才自动播放\n    // 如果是 Full-time 或 End Screen 按钮，禁止自动播放\n    if (!isDraggingSlider && \n        (selectedButtonType || buttonType) === null &&\n        videoRef.current && \n        videoRef.current.paused) {\n      videoRef.current.play().catch(e => console.error('Auto play failed:', e));\n    }\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"text-center mb-6\">\n        <h2 className=\"text-2xl font-semibold text-gray-800\">\n          Add CTA Buttons\n        </h2>\n        <p className=\"text-gray-600\">\n          Add call-to-action buttons to your playable ad\n        </p>\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n        <div>\n          <div className=\"flex items-center justify-between mb-3\">\n            <h3 className=\"text-lg font-medium text-gray-800\">Video</h3>\n            <button\n              onClick={toggleOrientation}\n              className=\"flex items-center px-3 py-1.5 bg-blue-100 text-blue-700 rounded-md hover:bg-blue-200 transition-colors\"\n            >\n              <svg\n                className=\"h-4 w-4 mr-1\"\n                fill=\"none\"\n                stroke=\"currentColor\"\n                viewBox=\"0 0 24 24\"\n                xmlns=\"http://www.w3.org/2000/svg\"\n              >\n                <path\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                  strokeWidth={2}\n                  d=\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\"\n                />\n              </svg>\n              {isLandscape ? \"Portrait Mode\" : \"Landscape Mode\"}\n            </button>\n          </div>\n          \n          <div \n            ref={containerRef}\n            className={`bg-black rounded-lg overflow-hidden relative transition-all duration-300 ${\n              isLandscape \n                ? \"aspect-video\" \n                : \"aspect-[9/16] max-w-[400px] mx-auto\"\n            }`}\n          >\n            <video\n              ref={videoRef}\n              src={formData.video.url}\n              className=\"w-full h-full object-contain pointer-events-none\"\n              onTimeUpdate={handleVideoTimeUpdate}\n              onPause={handleVideoPause}\n              onSeeked={handleVideoSeeked}\n            />\n            \n            {/* Current button preview */}\n            {currentButton && (\n              <div\n                className={`absolute cursor-move ${isDragging ? 'pointer-events-none' : ''}`}\n                style={{\n                  left: `${position.left}%`,\n                  top: `${position.top}%`,\n                  transform: `translate(-50%, -50%) scale(${scale})`,\n                  maxWidth: '30%',\n                  maxHeight: '30%'\n                }}\n                onMouseDown={startDrag}\n              >\n                <img \n                  src={currentButton.image.url} \n                  alt=\"CTA Button\" \n                  className=\"max-w-full max-h-full pointer-events-none\"\n                />\n              </div>\n            )}\n          </div>\n        </div>\n\n        <div>\n          <div className=\"flex items-center justify-between mb-3\">\n            <div>\n              <h3 className=\"text-lg font-medium text-gray-800\">\n                CTA Buttons ({formData.ctaButtons.length}/2)\n              </h3>\n              <div className=\"flex space-x-2 mt-1\">\n                <span className={`text-xs px-2 py-1 rounded-full ${\n                  formData.ctaButtons.some((btn: CTAButton) => btn.type === \"fulltime\")\n                    ? \"bg-green-100 text-green-700\"\n                    : \"bg-gray-100 text-gray-500\"\n                }`}>\n                  {formData.ctaButtons.some((btn: CTAButton) => btn.type === \"fulltime\") ? \"✓\" : \"○\"} Full-time\n                </span>\n                <span className={`text-xs px-2 py-1 rounded-full ${\n                  formData.ctaButtons.some((btn: CTAButton) => btn.type === \"endscreen\")\n                    ? \"bg-green-100 text-green-700\"\n                    : \"bg-gray-100 text-gray-500\"\n                }`}>\n                  {formData.ctaButtons.some((btn: CTAButton) => btn.type === \"endscreen\") ? \"✓\" : \"○\"} End Screen\n                </span>\n              </div>\n            </div>\n            <div className=\"flex space-x-2\">\n              <button\n                onClick={() => {\n                  setCurrentButton(null);\n                  setError(null);\n                  setButtonType(\"fulltime\");\n                  setSelectedButtonType(\"fulltime\");\n                  // 触发文件选择\n                  const input = document.createElement('input');\n                  input.type = 'file';\n                  input.accept = 'image/*';\n                  input.onchange = (e) => {\n                    const file = (e.target as HTMLInputElement).files?.[0];\n                    if (file) {\n                      onDrop([file]);\n                    }\n                  };\n                  input.click();\n                }}\n                disabled={formData.ctaButtons.some((btn: CTAButton) => btn.type === \"fulltime\")}\n                className={`px-3 py-2 rounded-md font-medium text-sm transition-colors ${\n                  formData.ctaButtons.some((btn: CTAButton) => btn.type === \"fulltime\")\n                    ? \"bg-gray-100 text-gray-400 cursor-not-allowed\"\n                    : \"bg-blue-100 text-blue-700 hover:bg-blue-200\"\n                }`}\n              >\n                + Full-time Button\n              </button>\n              <button\n                onClick={() => {\n                  setCurrentButton(null);\n                  setError(null);\n                  setButtonType(\"endscreen\");\n                  setSelectedButtonType(\"endscreen\");\n                  // 触发文件选择\n                  const input = document.createElement('input');\n                  input.type = 'file';\n                  input.accept = 'image/*';\n                  input.onchange = (e) => {\n                    const file = (e.target as HTMLInputElement).files?.[0];\n                    if (file) {\n                      onDrop([file]);\n                    }\n                  };\n                  input.click();\n                }}\n                disabled={formData.ctaButtons.some((btn: CTAButton) => btn.type === \"endscreen\")}\n                className={`px-3 py-2 rounded-md font-medium text-sm transition-colors ${\n                  formData.ctaButtons.some((btn: CTAButton) => btn.type === \"endscreen\")\n                    ? \"bg-gray-100 text-gray-400 cursor-not-allowed\"\n                    : \"bg-green-100 text-green-700 hover:bg-green-200\"\n                }`}\n              >\n                + End Screen Button\n              </button>\n            </div>\n          </div>\n          \n          {/* 简化的操作区域 */}\n          {!currentButton && (\n            <div className=\"bg-gray-50 rounded-lg p-6 text-center\">\n              <div className=\"space-y-4\">\n                <svg\n                  className=\"mx-auto h-12 w-12 text-gray-400\"\n                  fill=\"none\"\n                  stroke=\"currentColor\"\n                  viewBox=\"0 0 24 24\"\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                >\n                  <path\n                    strokeLinecap=\"round\"\n                    strokeLinejoin=\"round\"\n                    strokeWidth={1.5}\n                    d=\"M15 15l-2 5L9 9l11 4-5 2zm0 0l5 5M7.188 2.239l.777 2.897M5.136 7.965l-2.898-.777M13.95 4.05l-2.122 2.122m-5.657 5.656l-2.12 2.122\"\n                  />\n                </svg>\n                <div>\n                  <h4 className=\"text-lg font-medium text-gray-800 mb-2\">\n                    Add Call-to-Action Buttons\n                  </h4>\n                  <p className=\"text-gray-600 mb-4\">\n                    Click one of the buttons above to add a Full-time or End Screen CTA button\n                  </p>\n                  \n                  {/* 添加按钮显示逻辑说明 */}\n                  <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4 text-left\">\n                    <div className=\"flex items-start\">\n                      <div className=\"flex-shrink-0\">\n                        <svg className=\"h-5 w-5 text-blue-400\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                          <path fillRule=\"evenodd\" d=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z\" clipRule=\"evenodd\" />\n                        </svg>\n                      </div>\n                      <div className=\"ml-3\">\n                        <h5 className=\"text-sm font-medium text-blue-800\">Button Display Logic</h5>\n                        <div className=\"mt-1 text-sm text-blue-700\">\n                          <p><strong>Full-time Button:</strong> Shows throughout the video until the End Screen button appears.</p>\n                          <p><strong>End Screen Button:</strong> Shows at the specified time and replaces the Full-time button.</p>\n                          <p className=\"mt-1 text-blue-600\"><em>Note: Only one button is visible at a time.</em></p>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n                \n                <div className=\"grid grid-cols-2 gap-4 max-w-md mx-auto\">\n                  <div className=\"text-center p-4 border-2 border-dashed border-gray-300 rounded-lg\">\n                    <div className=\"text-2xl mb-2\">⏱️</div>\n                    <h5 className=\"font-medium text-gray-800\">Full-time Button</h5>\n                  </div>\n                  <div className=\"text-center p-4 border-2 border-dashed border-gray-300 rounded-lg\">\n                    <div className=\"text-2xl mb-2\">🎯</div>\n                    <h5 className=\"font-medium text-gray-800\">End Screen Button</h5>\n                  </div>\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* 按钮配置区域 - 只在有按钮时显示 */}\n          {currentButton && (\n            <div className=\"bg-white border border-gray-200 rounded-lg p-6\">\n              <div className=\"flex items-center justify-between mb-4\">\n                <h4 className=\"text-lg font-medium text-gray-800\">\n                  {editingButton ? \"Edit\" : \"Configure\"} {(selectedButtonType || buttonType) === \"fulltime\" ? \"Full-time\" : \"End Screen\"} Button\n                </h4>\n                <button\n                  onClick={() => {\n                    setCurrentButton(null);\n                    setError(null);\n                    setSelectedButtonType(null);\n                    setEditingButton(null);\n                  }}\n                  className=\"px-4 py-2 bg-red-100 text-red-700 rounded-md hover:bg-red-200 transition-colors font-medium text-sm\"\n                >\n                  Cancel\n                </button>\n              </div>\n              \n\n              \n              {/* 按钮预览 */}\n              <div className=\"mb-6 p-4 bg-gray-50 rounded-lg\">\n                <h5 className=\"text-sm font-medium text-gray-800 mb-3\">Button Preview</h5>\n                <div className=\"flex items-center space-x-4\">\n                  <div className=\"h-16 w-16 flex-shrink-0 rounded overflow-hidden bg-gray-200 border border-gray-300 flex items-center justify-center\">\n                    <img\n                      src={currentButton.image.url}\n                      alt=\"Button preview\"\n                      className=\"max-h-full max-w-full object-contain\"\n                    />\n                  </div>\n                  <div className=\"flex-grow\">\n                    <div className=\"grid grid-cols-2 gap-2 text-xs\">\n                      <div>\n                        <p className=\"text-gray-500\">Type:</p>\n                        <p className=\"font-medium\">{(selectedButtonType || buttonType) === \"fulltime\" ? \"Full-time\" : \"End Screen\"}</p>\n                      </div>\n                      <div>\n                        <p className=\"text-gray-500\">Position:</p>\n                        <p className=\"font-medium\">{position.left.toFixed(0)}% left, {position.top.toFixed(0)}% top</p>\n                      </div>\n                      <div>\n                        <p className=\"text-gray-500\">Scale:</p>\n                        <p className=\"font-medium\">{scale.toFixed(1)}x</p>\n                      </div>\n                      <div>\n                        <p className=\"text-gray-500\">Status:</p>\n                        <p className=\"font-medium text-green-600\">Ready to add</p>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              {/* 配置选项 */}\n              <div className=\"space-y-4\">\n                {/* 图片上传区域 */}\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Button Image\n                  </label>\n                  <div\n                    {...getRootProps()}\n                    className={`border-2 border-dashed rounded-lg p-4 text-center cursor-pointer transition-colors ${\n                      isDragActive\n                        ? \"border-blue-500 bg-blue-50\"\n                        : \"border-gray-300 hover:border-blue-400\"\n                    } ${uploading ? \"opacity-75\" : \"\"}`}\n                  >\n                    <input {...getInputProps()} />\n                    <div className=\"space-y-2\">\n                      <svg\n                        className=\"mx-auto h-6 w-6 text-gray-400\"\n                        fill=\"none\"\n                        stroke=\"currentColor\"\n                        viewBox=\"0 0 24 24\"\n                        xmlns=\"http://www.w3.org/2000/svg\"\n                      >\n                        <path\n                          strokeLinecap=\"round\"\n                          strokeLinejoin=\"round\"\n                          strokeWidth={1.5}\n                          d=\"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z\"\n                        />\n                      </svg>\n                      {uploading ? (\n                        <p className=\"text-gray-700 text-sm\">Uploading image...</p>\n                      ) : (\n                        <p className=\"text-gray-700 text-sm\">\n                          {isDragActive\n                            ? \"Drop the button image here\"\n                            : \"Drag and drop your button image here, or click to select\"}\n                        </p>\n                      )}\n                      <p className=\"text-xs text-gray-500\">\n                        Supported formats: PNG, JPG, GIF, WebP\n                      </p>\n                    </div>\n                  </div>\n                </div>\n\n                {(selectedButtonType || buttonType) === \"endscreen\" && (\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                      Start Time (seconds)\n                    </label>\n                    <input\n                      type=\"range\"\n                      min=\"0.1\"\n                      max={formData.video.metadata?.duration || 30}\n                      step=\"0.1\"\n                      value={startTime}\n                      onChange={handleTimeChange}\n                      onMouseUp={handleTimeChangeEnd}\n                      onTouchEnd={handleTimeChangeEnd}\n                      className=\"w-full\"\n                    />\n                    <div className=\"flex justify-between text-xs text-gray-500 mt-1\">\n                      <span>0.1s</span>\n                      <span className=\"font-medium\">{startTime.toFixed(1)}s</span>\n                      <span>{(formData.video.metadata?.duration || 30).toFixed(1)}s</span>\n                    </div>\n                    <p className=\"text-xs text-gray-500 mt-1\">\n                      End Screen button cannot start at 0s. Minimum time is 0.1s.\n                    </p>\n                  </div>\n                )}\n\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                      Left Position (%)\n                    </label>\n                    <input\n                      type=\"range\"\n                      min=\"0\"\n                      max=\"100\"\n                      value={position.left}\n                      onChange={(e) => handlePositionChange(e, \"left\")}\n                      className=\"w-full\"\n                    />\n                    <div className=\"text-center text-xs text-gray-500 mt-1\">\n                      {position.left.toFixed(0)}%\n                    </div>\n                  </div>\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                      Top Position (%)\n                    </label>\n                    <input\n                      type=\"range\"\n                      min=\"0\"\n                      max=\"100\"\n                      value={position.top}\n                      onChange={(e) => handlePositionChange(e, \"top\")}\n                      className=\"w-full\"\n                    />\n                    <div className=\"text-center text-xs text-gray-500 mt-1\">\n                      {position.top.toFixed(0)}%\n                    </div>\n                  </div>\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Button Scale\n                  </label>\n                  <input\n                    type=\"range\"\n                    min=\"0.1\"\n                    max=\"2\"\n                    step=\"0.1\"\n                    value={scale}\n                    onChange={handleScaleChange}\n                    className=\"w-full\"\n                  />\n                  <div className=\"flex justify-between text-xs text-gray-500 mt-1\">\n                    <span>Smaller (0.1x)</span>\n                    <span className=\"font-medium\">{scale.toFixed(1)}x</span>\n                    <span>Larger (2x)</span>\n                  </div>\n                </div>\n              </div>\n\n              {error && (\n                <div className=\"mt-4 bg-red-50 text-red-600 p-3 rounded-md text-center text-sm\">\n                  {error}\n                </div>\n              )}\n\n              <div className=\"mt-6\">\n                {editingButton ? (\n                  <div className=\"flex space-x-3\">\n                    <button\n                      onClick={saveEdit}\n                      className=\"flex-1 py-3 rounded-lg font-medium bg-green-600 text-white hover:bg-green-700\"\n                    >\n                      Save Changes\n                    </button>\n                    <button\n                      onClick={cancelEdit}\n                      className=\"flex-1 py-3 rounded-lg font-medium border border-gray-300 text-gray-700 hover:bg-gray-50\"\n                    >\n                      Cancel\n                    </button>\n                  </div>\n                ) : (\n                  <button\n                    onClick={addCTAButton}\n                    disabled={uploading}\n                    className={`w-full py-3 rounded-lg font-medium ${\n                      uploading\n                        ? \"bg-gray-200 text-gray-500 cursor-not-allowed\"\n                        : \"bg-green-600 text-white hover:bg-green-700\"\n                    }`}\n                  >\n                    {uploading ? \"Uploading...\" : `Add ${(selectedButtonType || buttonType) === \"fulltime\" ? \"Full-time\" : \"End Screen\"} Button`}\n                  </button>\n                )}\n              </div>\n            </div>\n          )}\n\n          {/* 已添加的按钮列表 */}\n          {formData.ctaButtons.length > 0 && (\n            <div className=\"mt-6\">\n              <h4 className=\"text-sm font-medium text-gray-800 mb-3\">Your CTA Buttons</h4>\n              <div className=\"space-y-3 max-h-48 overflow-y-auto pr-2\">\n                {formData.ctaButtons.map((button: CTAButton, index: number) => (\n                  <div\n                    key={button.id}\n                    className=\"bg-white border border-gray-200 rounded-lg p-3 shadow-sm\"\n                  >\n                    <div className=\"flex items-center\">\n                      <div className=\"h-10 w-10 flex-shrink-0 rounded overflow-hidden bg-gray-200 border border-gray-300 flex items-center justify-center\">\n                        <img\n                          src={button.image.url}\n                          alt=\"CTA Button\"\n                          className=\"max-h-full max-w-full object-contain\"\n                        />\n                      </div>\n                      <div className=\"ml-3 flex-grow min-w-0\">\n                        <p className=\"text-sm font-medium text-gray-800 truncate\">\n                          Button #{index + 1} ({button.type === \"fulltime\" ? \"Full-time\" : \"End Screen\"})\n                        </p>\n                        <p className=\"text-xs text-gray-500 truncate\">\n                          {button.type === \"endscreen\" && button.startTime !== undefined\n                            ? button.startTime === 0\n                              ? `⚠️ Invalid time (0.0s) - Please edit to set a valid time • `\n                              : `Appears at ${button.startTime.toFixed(1)}s • `\n                            : \"Shows until End Screen button appears • \"}\n                          {button.position.left.toFixed(0)}% left, {button.position.top.toFixed(0)}% top\n                          {button.scale ? ` • ${button.scale.toFixed(1)}x` : ''}\n                        </p>\n                      </div>\n                      <div className=\"flex space-x-1\">\n                        {(button.type === \"endscreen\" && button.startTime === 0) && (\n                          <button\n                            onClick={() => editCTAButton(button)}\n                            className=\"p-1 text-orange-500 hover:text-orange-700 flex-shrink-0\"\n                            title=\"Edit button time\"\n                          >\n                            <svg\n                              className=\"h-4 w-4\"\n                              fill=\"none\"\n                              stroke=\"currentColor\"\n                              viewBox=\"0 0 24 24\"\n                              xmlns=\"http://www.w3.org/2000/svg\"\n                            >\n                              <path\n                                strokeLinecap=\"round\"\n                                strokeLinejoin=\"round\"\n                                strokeWidth={1.5}\n                                d=\"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z\"\n                              />\n                            </svg>\n                          </button>\n                        )}\n                        <button\n                          onClick={() => removeCTAButton(button.id)}\n                          className=\"p-1 text-red-500 hover:text-red-700 flex-shrink-0\"\n                          title=\"Delete button\"\n                        >\n                          <svg\n                            className=\"h-4 w-4\"\n                            fill=\"none\"\n                            stroke=\"currentColor\"\n                            viewBox=\"0 0 24 24\"\n                            xmlns=\"http://www.w3.org/2000/svg\"\n                          >\n                            <path\n                              strokeLinecap=\"round\"\n                              strokeLinejoin=\"round\"\n                              strokeWidth={1.5}\n                              d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\"\n                            />\n                          </svg>\n                        </button>\n                      </div>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n\n      <div className=\"flex justify-between pt-6\">\n        <button\n          onClick={prevStep}\n          className=\"px-6 py-2 rounded-md text-gray-700 font-medium border border-gray-300 hover:bg-gray-50\"\n        >\n          Back\n        </button>\n        <button\n          onClick={handleContinue}\n          disabled={!formData.ctaButtons.some((btn: CTAButton) => btn.type === \"fulltime\") || \n                   !formData.ctaButtons.some((btn: CTAButton) => btn.type === \"endscreen\")}\n          className={`px-6 py-2 rounded-md font-medium ${\n            !formData.ctaButtons.some((btn: CTAButton) => btn.type === \"fulltime\") || \n            !formData.ctaButtons.some((btn: CTAButton) => btn.type === \"endscreen\")\n              ? \"bg-gray-300 text-gray-500 cursor-not-allowed\"\n              : \"bg-blue-600 hover:bg-blue-700 text-white\"\n          }`}\n        >\n          Continue\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default CTAButtons; "],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3982, "column": 0}, "map": {"version":3,"sources":["file:///Users/ryonluo/Code/PlayableAllMaker/frontend/components/steps/BannerUpload.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useRef, useEffect } from \"react\";\nimport { useDropzone } from \"react-dropzone\";\n\ninterface BannerUploadProps {\n  formData: any;\n  updateFormData: (field: string, value: any) => void;\n  nextStep: () => void;\n  prevStep: () => void;\n}\n\nconst BannerUpload: React.FC<BannerUploadProps> = ({\n  formData,\n  updateFormData,\n  nextStep,\n  prevStep,\n}) => {\n  const [uploading, setUploading] = useState<\"left\" | \"right\" | null>(null);\n  const [error, setError] = useState<string | null>(null);\n  const [isLandscape, setIsLandscape] = useState(true); // 默认为横屏模式，因为Banner是为横屏设计的\n  const [videoIsLandscape, setVideoIsLandscape] = useState(false); // 视频本身的宽高比\n  const [isDraggingSlider, setIsDraggingSlider] = useState(false); // 添加是否正在拖动滑块的状态\n  const [isDraggingBanner, setIsDraggingBanner] = useState(false); // 是否正在拖动 Banner\n  const [draggingBannerType, setDraggingBannerType] = useState<\"left\" | \"right\" | null>(null); // 正在拖动的 Banner 类型\n  const videoRef = useRef<HTMLVideoElement>(null);\n\n  // 当组件加载时，根据视频方向设置横竖屏状态\n  useEffect(() => {\n    // Banner页面默认使用横屏模式，但仍然检查视频原始宽高\n    if (formData.video && formData.video.metadata) {\n      const { width, height } = formData.video.metadata;\n      if (width && height) {\n        // 设置视频本身的宽高比状态\n        setVideoIsLandscape(width > height);\n        // 即使视频是竖屏，我们也使用横屏模式，因为Banner是为横屏设计的\n        setIsLandscape(true);\n      }\n    }\n  }, [formData.video]);\n\n  // Check if we have a video\n  if (!formData.video) {\n    return (\n      <div className=\"text-center py-8\">\n        <p className=\"text-red-500\">Please upload a video first</p>\n        <button\n          onClick={prevStep}\n          className=\"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md\"\n        >\n          Go Back\n        </button>\n      </div>\n    );\n  }\n\n  const onDropLeft = async (acceptedFiles: File[]) => {\n    await handleDrop(acceptedFiles, \"left\");\n  };\n\n  const onDropRight = async (acceptedFiles: File[]) => {\n    await handleDrop(acceptedFiles, \"right\");\n  };\n\n  const handleDrop = async (acceptedFiles: File[], position: \"left\" | \"right\") => {\n    if (acceptedFiles.length === 0) return;\n\n    const file = acceptedFiles[0];\n    \n    // Check if file is an image\n    if (!file.type.startsWith(\"image/\")) {\n      setError(\"Please upload an image file\");\n      return;\n    }\n\n    try {\n      setError(null);\n      setUploading(position);\n\n      // Create form data for upload\n      const uploadData = new FormData();\n      uploadData.append(\"file\", file);\n      uploadData.append(\"type\", \"image\");\n      uploadData.append(\"step\", \"banner\");\n      uploadData.append(\"position\", position);\n\n      // Upload to backend API\n      const response = await fetch(\"http://localhost:8080/api/upload\", {\n        method: \"POST\",\n        body: uploadData,\n      });\n\n      if (!response.ok) {\n        throw new Error(`Failed to upload ${position} banner`);\n      }\n\n      const data = await response.json();\n\n      if (!data.success) {\n        throw new Error(data.error || `Failed to upload ${position} banner`);\n      }\n\n      // Update form data\n      updateFormData(\"banners\", {\n        ...formData.banners,\n        [position]: {\n          id: data.file_id,\n          url: `http://localhost:8080${data.url}`,\n          position: position === \"left\" \n            ? (videoIsLandscape ? { left: 0, top: 50 } : { left: 0, top: 0 })\n            : (videoIsLandscape ? { left: 83.33, top: 50 } : { left: 50, top: 83.33 }),\n          scale: 1\n        },\n      });\n\n      setUploading(null);\n    } catch (err: any) {\n      setError(err.message || \"An error occurred during upload\");\n      setUploading(null);\n    }\n  };\n\n  const { getRootProps: getLeftRootProps, getInputProps: getLeftInputProps, isDragActive: isLeftDragActive } = useDropzone({\n    onDrop: onDropLeft,\n    accept: {\n      'image/*': ['.png', '.jpg', '.jpeg', '.gif', '.webp']\n    },\n    disabled: uploading !== null,\n    maxFiles: 1,\n  });\n\n  const { getRootProps: getRightRootProps, getInputProps: getRightInputProps, isDragActive: isRightDragActive } = useDropzone({\n    onDrop: onDropRight,\n    accept: {\n      'image/*': ['.png', '.jpg', '.jpeg', '.gif', '.webp']\n    },\n    disabled: uploading !== null,\n    maxFiles: 1,\n  });\n\n  const removeBanner = (position: \"left\" | \"right\") => {\n    const updatedBanners = { ...formData.banners };\n    updatedBanners[position] = null;\n    updateFormData(\"banners\", updatedBanners);\n  };\n\n  const handleContinue = () => {\n    nextStep();\n  };\n\n  // Banner 拖动相关函数\n  const startBannerDrag = (e: React.MouseEvent, bannerType: \"left\" | \"right\") => {\n    e.preventDefault();\n    setIsDraggingBanner(true);\n    setDraggingBannerType(bannerType);\n  };\n\n  const handleBannerDrag = (e: React.MouseEvent) => {\n    if (!isDraggingBanner || !draggingBannerType) return;\n\n    const container = e.currentTarget as HTMLElement;\n    const rect = container.getBoundingClientRect();\n    const x = ((e.clientX - rect.left) / rect.width) * 100;\n    const y = ((e.clientY - rect.top) / rect.height) * 100;\n\n    // 限制位置在容器内\n    const clampedX = Math.max(0, Math.min(100, x));\n    const clampedY = Math.max(0, Math.min(100, y));\n\n    // 更新 Banner 位置\n    const updatedBanners = { ...formData.banners };\n    if (updatedBanners[draggingBannerType]) {\n      updatedBanners[draggingBannerType] = {\n        ...updatedBanners[draggingBannerType]!,\n        position: { left: clampedX, top: clampedY }\n      };\n      updateFormData(\"banners\", updatedBanners);\n    }\n  };\n\n  const stopBannerDrag = () => {\n    setIsDraggingBanner(false);\n    setDraggingBannerType(null);\n  };\n\n  // Banner 缩放处理函数\n  const handleBannerScaleChange = (bannerType: \"left\" | \"right\", scale: number) => {\n    const updatedBanners = { ...formData.banners };\n    if (updatedBanners[bannerType]) {\n      updatedBanners[bannerType] = {\n        ...updatedBanners[bannerType]!,\n        scale: scale\n      };\n      updateFormData(\"banners\", updatedBanners);\n    }\n  };\n\n  // 切换横竖屏\n  const toggleOrientation = () => {\n    setIsLandscape(!isLandscape);\n  };\n\n  // 当视频被拖动后自动播放\n  const handleVideoSeeked = () => {\n    // 只有在非拖动滑块状态下才自动播放\n    if (!isDraggingSlider && videoRef.current && videoRef.current.paused) {\n      videoRef.current.play().catch(e => console.error('Auto play failed:', e));\n    }\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"text-center mb-6\">\n        <h2 className=\"text-2xl font-semibold text-gray-800\">\n          Add Banner Images (Optional)\n        </h2>\n        <p className=\"text-gray-600\">\n          Add banner images for landscape mode display\n        </p>\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n        <div>\n          <div className=\"flex items-center justify-between mb-3\">\n            <h3 className=\"text-lg font-medium text-gray-800\">Video</h3>\n            <button\n              onClick={toggleOrientation}\n              className=\"flex items-center px-3 py-1.5 bg-blue-100 text-blue-700 rounded-md hover:bg-blue-200 transition-colors\"\n            >\n              <svg\n                className=\"h-4 w-4 mr-1\"\n                fill=\"none\"\n                stroke=\"currentColor\"\n                viewBox=\"0 0 24 24\"\n                xmlns=\"http://www.w3.org/2000/svg\"\n              >\n                <path\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                  strokeWidth={2}\n                  d=\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\"\n                />\n              </svg>\n              {isLandscape ? \"Portrait Mode\" : \"Landscape Mode\"}\n            </button>\n          </div>\n          \n          <div \n            className={`bg-black rounded-lg overflow-hidden relative transition-all duration-300 ${\n              isLandscape \n                ? \"aspect-video\" \n                : \"aspect-[9/16] max-w-[400px] mx-auto\"\n            }`}\n            onMouseMove={handleBannerDrag}\n            onMouseUp={stopBannerDrag}\n            onMouseLeave={stopBannerDrag}\n          >\n            <video\n              ref={videoRef}\n              src={formData.video.url}\n              className=\"w-full h-full object-contain pointer-events-none\"\n              onSeeked={handleVideoSeeked}\n            />\n            \n            {/* 根据视频方向和当前显示模式显示 Banner */}\n            {videoIsLandscape ? (\n              // 横屏视频：只在竖屏模式下显示 Top/Bottom Banner\n              !isLandscape && (\n                <>\n                  {formData.banners?.left && (\n                    <div \n                      className=\"absolute cursor-move\"\n                      style={{\n                        left: `${formData.banners.left.position?.left || 0}%`,\n                        top: `${formData.banners.left.position?.top || 0}%`,\n                        transform: `translate(-50%, -50%) scale(${formData.banners.left.scale || 1})`,\n                        width: '16.67%', // 1/6 of container width\n                        height: '16.67%'  // 1/6 of container height\n                      }}\n                      onMouseDown={(e) => startBannerDrag(e, \"left\")}\n                    >\n                      <img \n                        src={formData.banners.left.url} \n                        alt=\"Left Banner\"\n                        className=\"w-full h-full object-contain\" \n                      />\n                    </div>\n                  )}\n                  \n                  {formData.banners?.right && (\n                    <div \n                      className=\"absolute cursor-move\"\n                      style={{\n                        left: `${formData.banners.right.position?.left || 50}%`,\n                        top: `${formData.banners.right.position?.top || 83.33}%`,\n                        transform: `translate(-50%, -50%) scale(${formData.banners.right.scale || 1})`,\n                        width: '16.67%', // 1/6 of container width\n                        height: '16.67%'  // 1/6 of container height\n                      }}\n                      onMouseDown={(e) => startBannerDrag(e, \"right\")}\n                    >\n                      <img \n                        src={formData.banners.right.url} \n                        alt=\"Right Banner\"\n                        className=\"w-full h-full object-contain\" \n                      />\n                    </div>\n                  )}\n                </>\n              )\n            ) : (\n              // 竖屏视频：只在横屏模式下显示 Left/Right Banner\n              isLandscape && (\n                <>\n                  {formData.banners?.left && (\n                    <div \n                      className=\"absolute cursor-move\"\n                      style={{\n                        left: `${formData.banners.left.position?.left || 0}%`,\n                        top: `${formData.banners.left.position?.top || 50}%`,\n                        transform: `translate(-50%, -50%) scale(${formData.banners.left.scale || 1})`,\n                        width: '16.67%', // 1/6 of container width\n                        height: '100%'   // full height\n                      }}\n                      onMouseDown={(e) => startBannerDrag(e, \"left\")}\n                    >\n                      <img \n                        src={formData.banners.left.url} \n                        alt=\"Top Banner\"\n                        className=\"w-full h-full object-contain\" \n                      />\n                    </div>\n                  )}\n                  \n                  {formData.banners?.right && (\n                    <div \n                      className=\"absolute cursor-move\"\n                      style={{\n                        left: `${formData.banners.right.position?.left || 83.33}%`,\n                        top: `${formData.banners.right.position?.top || 50}%`,\n                        transform: `translate(-50%, -50%) scale(${formData.banners.right.scale || 1})`,\n                        width: '16.67%', // 1/6 of container width\n                        height: '100%'   // full height\n                      }}\n                      onMouseDown={(e) => startBannerDrag(e, \"right\")}\n                    >\n                      <img \n                        src={formData.banners.right.url} \n                        alt=\"Bottom Banner\"\n                        className=\"w-full h-full object-contain\" \n                      />\n                    </div>\n                  )}\n                </>\n              )\n            )}\n          </div>\n        </div>\n\n        <div>\n          <h3 className=\"text-lg font-medium text-gray-800 mb-4\">Add Banner Images</h3>\n          \n          {/* Note 内容移到上方 */}\n          {(formData.banners?.left || formData.banners?.right) && (\n            <div className=\"mb-6 p-4 bg-blue-50 rounded-lg\">\n              <div className=\"flex items-start\">\n                <svg\n                  className=\"h-5 w-5 text-blue-400 mt-0.5 mr-3 flex-shrink-0\"\n                  fill=\"none\"\n                  stroke=\"currentColor\"\n                  viewBox=\"0 0 24 24\"\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                >\n                  <path\n                    strokeLinecap=\"round\"\n                    strokeLinejoin=\"round\"\n                    strokeWidth={2}\n                    d=\"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"\n                  />\n                </svg>\n                <div>\n                  <h4 className=\"text-sm font-medium text-blue-800\">Note</h4>\n                  <p className=\"text-sm text-blue-700 mt-1\">\n                    {formData.banners?.left && formData.banners?.right \n                      ? \"\" // 上传了两个 banner 后不显示提示\n                      : formData.banners?.left || formData.banners?.right \n                        ? `You have uploaded one banner image. Please upload both ${videoIsLandscape ? \"top and bottom\" : \"left and right\"} banner images to continue.`\n                        : `Banner images are optional and will be displayed ${videoIsLandscape ? \"on the top and bottom\" : \"on the left and right sides\"} of the video when viewed in ${videoIsLandscape ? \"portrait\" : \"landscape\"} mode. This helps to fill empty space on ${videoIsLandscape ? \"taller\" : \"wider\"} screens.`\n                    }\n                  </p>\n                </div>\n              </div>\n            </div>\n          )}\n          \n          <div className=\"space-y-6\">\n            {/* Left Banner */}\n            <div>\n              <h4 className=\"text-sm font-medium text-gray-700 mb-3\">\n                {videoIsLandscape ? \"Top Banner\" : \"Left Banner\"}\n              </h4>\n              {formData.banners?.left ? (\n                <div className=\"relative\">\n                  <img\n                    src={formData.banners.left.url}\n                    alt=\"Left Banner\"\n                    className=\"w-full h-32 object-contain rounded-lg\"\n                  />\n                  <button\n                    onClick={() => removeBanner(\"left\")}\n                    className=\"absolute top-2 right-2 p-1 bg-red-500 rounded-full text-white hover:bg-red-600\"\n                  >\n                    <svg\n                      className=\"h-5 w-5\"\n                      fill=\"none\"\n                      stroke=\"currentColor\"\n                      viewBox=\"0 0 24 24\"\n                      xmlns=\"http://www.w3.org/2000/svg\"\n                    >\n                      <path\n                        strokeLinecap=\"round\"\n                        strokeLinejoin=\"round\"\n                        strokeWidth={2}\n                        d=\"M6 18L18 6M6 6l12 12\"\n                      />\n                    </svg>\n                  </button>\n                </div>\n              ) : (\n                <div\n                  {...getLeftRootProps()}\n                  className={`border-2 border-dashed rounded-lg p-6 h-32 flex flex-col items-center justify-center cursor-pointer transition-colors ${\n                    isLeftDragActive\n                      ? \"border-blue-500 bg-blue-50\"\n                      : \"border-gray-300 hover:border-blue-400\"\n                  } ${uploading === \"left\" ? \"opacity-75\" : \"\"}`}\n                >\n                  <input {...getLeftInputProps()} />\n                  <svg\n                    className=\"h-8 w-8 text-gray-400 mb-2\"\n                    fill=\"none\"\n                    stroke=\"currentColor\"\n                    viewBox=\"0 0 24 24\"\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                  >\n                    <path\n                      strokeLinecap=\"round\"\n                      strokeLinejoin=\"round\"\n                      strokeWidth={1.5}\n                      d=\"M9 13h6m-3-3v6m-9 1V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2z\"\n                    />\n                  </svg>\n                  {uploading === \"left\" ? (\n                    <p className=\"text-gray-700 text-sm\">Uploading banner...</p>\n                  ) : (\n                    <p className=\"text-gray-700 text-sm text-center\">\n                      {isLeftDragActive\n                        ? \"Drop the image here\"\n                        : `Drag and drop ${videoIsLandscape ? \"top\" : \"left\"} banner image here, or click to select`}\n                    </p>\n                  )}\n                </div>\n              )}\n            </div>\n\n            {/* Left Banner Scale Control */}\n            {formData.banners?.left && (\n              <div className=\"mt-3 space-y-3\">\n                <div>\n                  <label className=\"block text-xs font-medium text-gray-700 mb-2\">\n                    {videoIsLandscape ? \"Top\" : \"Left\"} Banner Scale\n                  </label>\n                  <input\n                    type=\"range\"\n                    min=\"0.1\"\n                    max=\"3\"\n                    step=\"0.1\"\n                    value={formData.banners.left.scale || 1}\n                    onChange={(e) => handleBannerScaleChange(\"left\", parseFloat(e.target.value))}\n                    className=\"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer\"\n                  />\n                  <div className=\"flex justify-between text-xs text-gray-500 mt-1\">\n                    <span>0.1x</span>\n                    <span className=\"font-medium\">{(formData.banners.left.scale || 1).toFixed(1)}x</span>\n                    <span>3.0x</span>\n                  </div>\n                </div>\n                \n                <div>\n                  <label className=\"block text-xs font-medium text-gray-700 mb-2\">\n                    {videoIsLandscape ? \"Top\" : \"Left\"} Banner Position X\n                  </label>\n                  <input\n                    type=\"range\"\n                    min=\"0\"\n                    max=\"100\"\n                    step=\"1\"\n                    value={formData.banners.left.position?.left || 0}\n                    onChange={(e) => {\n                      const updatedBanners = { ...formData.banners };\n                      if (updatedBanners.left) {\n                        updatedBanners.left = {\n                          ...updatedBanners.left,\n                          position: { \n                            ...updatedBanners.left.position, \n                            left: parseFloat(e.target.value) \n                          }\n                        };\n                        updateFormData(\"banners\", updatedBanners);\n                      }\n                    }}\n                    className=\"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer\"\n                  />\n                  <div className=\"flex justify-between text-xs text-gray-500 mt-1\">\n                    <span>0%</span>\n                    <span className=\"font-medium\">{(formData.banners.left.position?.left || 0).toFixed(0)}%</span>\n                    <span>100%</span>\n                  </div>\n                </div>\n                \n                <div>\n                  <label className=\"block text-xs font-medium text-gray-700 mb-2\">\n                    {videoIsLandscape ? \"Top\" : \"Left\"} Banner Position Y\n                  </label>\n                  <input\n                    type=\"range\"\n                    min=\"0\"\n                    max=\"100\"\n                    step=\"1\"\n                    value={formData.banners.left.position?.top || 0}\n                    onChange={(e) => {\n                      const updatedBanners = { ...formData.banners };\n                      if (updatedBanners.left) {\n                        updatedBanners.left = {\n                          ...updatedBanners.left,\n                          position: { \n                            ...updatedBanners.left.position, \n                            top: parseFloat(e.target.value) \n                          }\n                        };\n                        updateFormData(\"banners\", updatedBanners);\n                      }\n                    }}\n                    className=\"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer\"\n                  />\n                  <div className=\"flex justify-between text-xs text-gray-500 mt-1\">\n                    <span>0%</span>\n                    <span className=\"font-medium\">{(formData.banners.left.position?.top || 0).toFixed(0)}%</span>\n                    <span>100%</span>\n                  </div>\n                </div>\n              </div>\n            )}\n\n            {/* Divider */}\n            {formData.banners?.left && formData.banners?.right && (\n              <div className=\"my-6 border-t border-gray-200\"></div>\n            )}\n\n            {/* Right Banner */}\n            <div>\n              <h4 className=\"text-sm font-medium text-gray-700 mb-3\">\n                {videoIsLandscape ? \"Bottom Banner\" : \"Right Banner\"}\n              </h4>\n              {formData.banners?.right ? (\n                <div className=\"relative\">\n                  <img\n                    src={formData.banners.right.url}\n                    alt=\"Right Banner\"\n                    className=\"w-full h-32 object-contain rounded-lg\"\n                  />\n                  <button\n                    onClick={() => removeBanner(\"right\")}\n                    className=\"absolute top-2 right-2 p-1 bg-red-500 rounded-full text-white hover:bg-red-600\"\n                  >\n                    <svg\n                      className=\"h-5 w-5\"\n                      fill=\"none\"\n                      stroke=\"currentColor\"\n                      viewBox=\"0 0 24 24\"\n                      xmlns=\"http://www.w3.org/2000/svg\"\n                    >\n                      <path\n                        strokeLinecap=\"round\"\n                        strokeLinejoin=\"round\"\n                        strokeWidth={2}\n                        d=\"M6 18L18 6M6 6l12 12\"\n                      />\n                    </svg>\n                  </button>\n                </div>\n              ) : (\n                <div\n                  {...getRightRootProps()}\n                  className={`border-2 border-dashed rounded-lg p-6 h-32 flex flex-col items-center justify-center cursor-pointer transition-colors ${\n                    isRightDragActive\n                      ? \"border-blue-500 bg-blue-50\"\n                      : \"border-gray-300 hover:border-blue-400\"\n                  } ${uploading === \"right\" ? \"opacity-75\" : \"\"}`}\n                >\n                  <input {...getRightInputProps()} />\n                  <svg\n                    className=\"h-8 w-8 text-gray-400 mb-2\"\n                    fill=\"none\"\n                    stroke=\"currentColor\"\n                    viewBox=\"0 0 24 24\"\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                  >\n                    <path\n                      strokeLinecap=\"round\"\n                      strokeLinejoin=\"round\"\n                      strokeWidth={1.5}\n                      d=\"M9 13h6m-3-3v6m-9 1V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2z\"\n                    />\n                  </svg>\n                  {uploading === \"right\" ? (\n                    <p className=\"text-gray-700 text-sm\">Uploading banner...</p>\n                  ) : (\n                    <p className=\"text-gray-700 text-sm text-center\">\n                      {isRightDragActive\n                        ? \"Drop the image here\"\n                        : `Drag and drop ${videoIsLandscape ? \"bottom\" : \"right\"} banner image here, or click to select`}\n                    </p>\n                  )}\n                </div>\n              )}\n            </div>\n\n            {/* Right Banner Scale Control */}\n            {formData.banners?.right && (\n              <div className=\"mt-3 space-y-3\">\n                <div>\n                  <label className=\"block text-xs font-medium text-gray-700 mb-2\">\n                    {videoIsLandscape ? \"Bottom\" : \"Right\"} Banner Scale\n                  </label>\n                  <input\n                    type=\"range\"\n                    min=\"0.1\"\n                    max=\"3\"\n                    step=\"0.1\"\n                    value={formData.banners.right.scale || 1}\n                    onChange={(e) => handleBannerScaleChange(\"right\", parseFloat(e.target.value))}\n                    className=\"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer\"\n                  />\n                  <div className=\"flex justify-between text-xs text-gray-500 mt-1\">\n                    <span>0.1x</span>\n                    <span className=\"font-medium\">{(formData.banners.right.scale || 1).toFixed(1)}x</span>\n                    <span>3.0x</span>\n                  </div>\n                </div>\n                \n                <div>\n                  <label className=\"block text-xs font-medium text-gray-700 mb-2\">\n                    {videoIsLandscape ? \"Bottom\" : \"Right\"} Banner Position X\n                  </label>\n                  <input\n                    type=\"range\"\n                    min=\"0\"\n                    max=\"100\"\n                    step=\"1\"\n                    value={formData.banners.right.position?.left || 50}\n                    onChange={(e) => {\n                      const updatedBanners = { ...formData.banners };\n                      if (updatedBanners.right) {\n                        updatedBanners.right = {\n                          ...updatedBanners.right,\n                          position: { \n                            ...updatedBanners.right.position, \n                            left: parseFloat(e.target.value) \n                          }\n                        };\n                        updateFormData(\"banners\", updatedBanners);\n                      }\n                    }}\n                    className=\"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer\"\n                  />\n                  <div className=\"flex justify-between text-xs text-gray-500 mt-1\">\n                    <span>0%</span>\n                    <span className=\"font-medium\">{(formData.banners.right.position?.left || 50).toFixed(0)}%</span>\n                    <span>100%</span>\n                  </div>\n                </div>\n                \n                <div>\n                  <label className=\"block text-xs font-medium text-gray-700 mb-2\">\n                    {videoIsLandscape ? \"Bottom\" : \"Right\"} Banner Position Y\n                  </label>\n                  <input\n                    type=\"range\"\n                    min=\"0\"\n                    max=\"100\"\n                    step=\"1\"\n                    value={formData.banners.right.position?.top || 83.33}\n                    onChange={(e) => {\n                      const updatedBanners = { ...formData.banners };\n                      if (updatedBanners.right) {\n                        updatedBanners.right = {\n                          ...updatedBanners.right,\n                          position: { \n                            ...updatedBanners.right.position, \n                            top: parseFloat(e.target.value) \n                          }\n                        };\n                        updateFormData(\"banners\", updatedBanners);\n                      }\n                    }}\n                    className=\"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer\"\n                  />\n                  <div className=\"flex justify-between text-xs text-gray-500 mt-1\">\n                    <span>0%</span>\n                    <span className=\"font-medium\">{(formData.banners.right.position?.top || 83.33).toFixed(0)}%</span>\n                    <span>100%</span>\n                  </div>\n                </div>\n              </div>\n            )}\n          </div>\n\n          {error && (\n            <div className=\"mt-4 bg-red-50 text-red-600 p-3 rounded-md text-center text-sm\">\n              {error}\n            </div>\n          )}\n        </div>\n      </div>\n\n      <div className=\"flex justify-between pt-6\">\n        <button\n          onClick={prevStep}\n          className=\"px-6 py-2 rounded-md text-gray-700 font-medium border border-gray-300 hover:bg-gray-50\"\n        >\n          Back\n        </button>\n        <button\n          onClick={handleContinue}\n          disabled={formData.banners?.left && !formData.banners?.right || !formData.banners?.left && formData.banners?.right}\n          className={`px-6 py-2 rounded-md font-medium ${\n            formData.banners?.left && !formData.banners?.right || !formData.banners?.left && formData.banners?.right\n              ? \"bg-gray-400 text-gray-600 cursor-not-allowed\"\n              : \"bg-blue-600 hover:bg-blue-700 text-white\"\n          }`}\n        >\n          {!formData.banners?.left && !formData.banners?.right \n            ? \"Skip & Continue\" \n            : \"Continue\"\n          }\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default BannerUpload; "],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 5286, "column": 0}, "map": {"version":3,"sources":["file:///Users/ryonluo/Code/PlayableAllMaker/frontend/components/steps/ExportAd.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useRef, useEffect } from \"react\";\n\ninterface RequestData {\n  video_id: string;\n  pause_frames: Array<{\n    time: number;\n    image_id: string;\n    position: { left: number; top: number };\n  }>;\n  cta_buttons: Array<{\n    type: string;\n    image_id: string;\n    position: { left: number; top: number };\n    start_time?: number;\n  }>;\n  platform: string;\n  banners?: {\n    left_image_id?: string;\n    right_image_id?: string;\n  };\n}\n\ninterface ExportAdProps {\n  formData: any;\n  updateFormData: (field: string, value: any) => void;\n  prevStep: () => void;\n}\n\nconst ExportAd: React.FC<ExportAdProps> = ({\n  formData,\n  updateFormData,\n  prevStep,\n}) => {\n  const [platform, setPlatform] = useState<string>(formData.platform || \"google\");\n  const [generating, setGenerating] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [isLandscape, setIsLandscape] = useState(false);\n  const [isDraggingSlider, setIsDraggingSlider] = useState(false);\n  const [result, setResult] = useState<{\n    fileUrl: string;\n    previewUrl?: string;\n  } | null>(null);\n  const videoRef = useRef<HTMLVideoElement>(null);\n\n  // 当组件加载时，根据视频方向设置横竖屏状态\n  useEffect(() => {\n    // 每次都根据视频原始宽高判断，不保留之前的设置\n    if (formData.video && formData.video.metadata) {\n      const { width, height } = formData.video.metadata;\n      if (width && height) {\n        setIsLandscape(width > height);\n      }\n    }\n  }, [formData.video]);\n\n  // Check if we have a video\n  if (!formData.video) {\n    return (\n      <div className=\"text-center py-8\">\n        <p className=\"text-red-500\">Please upload a video first</p>\n        <button\n          onClick={prevStep}\n          className=\"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md\"\n        >\n          Go Back\n        </button>\n      </div>\n    );\n  }\n\n  const handlePlatformChange = (e: React.ChangeEvent<HTMLSelectElement>) => {\n    setPlatform(e.target.value);\n    updateFormData(\"platform\", e.target.value);\n  };\n\n  // 切换横竖屏\n  const toggleOrientation = () => {\n    setIsLandscape(!isLandscape);\n  };\n\n  // 当视频被拖动后自动播放\n  const handleVideoSeeked = () => {\n    // 只有在非拖动滑块状态下才自动播放\n    if (!isDraggingSlider && videoRef.current && videoRef.current.paused) {\n      videoRef.current.play().catch(e => console.error('Auto play failed:', e));\n    }\n  };\n\n  const generateAd = async () => {\n    try {\n      setError(null);\n      setGenerating(true);\n\n      // Prepare request data\n      const requestData: RequestData = {\n        video_id: formData.video.id,\n        pause_frames: formData.pauseFrames.map((frame: any) => ({\n          time: frame.time,\n          image_id: frame.image.id,\n          position: frame.position,\n        })),\n        cta_buttons: formData.ctaButtons.map((button: any) => ({\n          type: button.type,\n          image_id: button.image.id,\n          position: button.position,\n          start_time: button.startTime,\n        })),\n        platform: platform,\n      };\n\n      // Add banners if they exist\n      if (formData.banners?.left || formData.banners?.right) {\n        requestData.banners = {};\n        if (formData.banners.left) {\n          requestData.banners.left_image_id = formData.banners.left.id;\n        }\n        if (formData.banners.right) {\n          requestData.banners.right_image_id = formData.banners.right.id;\n        }\n      }\n\n      // Send request to backend\n      const response = await fetch(\"http://localhost:8080/api/generate\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify(requestData),\n      });\n\n      if (!response.ok) {\n        throw new Error(\"Failed to generate ad\");\n      }\n\n      const data = await response.json();\n\n      if (!data.success) {\n        throw new Error(data.error || \"Failed to generate ad\");\n      }\n\n      // Set result\n      setResult({\n        fileUrl: `http://localhost:8080${data.file_url}`,\n        previewUrl: data.preview_url\n          ? `http://localhost:8080${data.preview_url}`\n          : undefined,\n      });\n\n      setGenerating(false);\n    } catch (err: any) {\n      setError(err.message || \"An error occurred during generation\");\n      setGenerating(false);\n    }\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"text-center mb-6\">\n        <h2 className=\"text-2xl font-semibold text-gray-800\">Export Ad</h2>\n        <p className=\"text-gray-600\">\n          Generate your playable ad for the selected platform\n        </p>\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n        <div>\n          <div className=\"flex items-center justify-between mb-3\">\n            <h3 className=\"text-lg font-medium text-gray-800\">Video Preview</h3>\n            <button\n              onClick={toggleOrientation}\n              className=\"flex items-center px-3 py-1.5 bg-blue-100 text-blue-700 rounded-md hover:bg-blue-200 transition-colors\"\n            >\n              <svg\n                className=\"h-4 w-4 mr-1\"\n                fill=\"none\"\n                stroke=\"currentColor\"\n                viewBox=\"0 0 24 24\"\n                xmlns=\"http://www.w3.org/2000/svg\"\n              >\n                <path\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                  strokeWidth={2}\n                  d=\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\"\n                />\n              </svg>\n              {isLandscape ? \"Portrait Mode\" : \"Landscape Mode\"}\n            </button>\n          </div>\n          \n          <div \n            className={`bg-black rounded-lg overflow-hidden transition-all duration-300 ${\n              isLandscape \n                ? \"aspect-video\" \n                : \"aspect-[9/16] max-w-[400px] mx-auto\"\n            }`}\n          >\n            <video\n              ref={videoRef}\n              src={formData.video.url}\n              className=\"w-full h-full object-contain pointer-events-none\"\n              onSeeked={handleVideoSeeked}\n            />\n          </div>\n        </div>\n\n        <div>\n          <h3 className=\"text-lg font-medium text-gray-800 mb-4\">\n            Ad Configuration\n          </h3>\n\n          <div className=\"space-y-4 bg-gray-50 p-4 rounded-lg\">\n            <div>\n              <label\n                htmlFor=\"platform\"\n                className=\"block text-sm font-medium text-gray-700 mb-1\"\n              >\n                Target Platform\n              </label>\n              <select\n                id=\"platform\"\n                value={platform}\n                onChange={handlePlatformChange}\n                className=\"w-full border border-gray-300 rounded-md py-2 px-3 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n              >\n                <option value=\"google\">Google Ads</option>\n                <option value=\"facebook\">Facebook Ads</option>\n                <option value=\"applovin\">AppLovin</option>\n              </select>\n            </div>\n\n            <div className=\"pt-2\">\n              <h4 className=\"text-sm font-medium text-gray-700 mb-2\">\n                Summary\n              </h4>\n              <div className=\"space-y-2 text-sm text-gray-600\">\n                <p>\n                  <span className=\"font-medium\">Video:</span>{\" \"}\n                  {formData.video.metadata?.duration\n                    ? `${formData.video.metadata.duration.toFixed(1)}s`\n                    : \"Uploaded\"}\n                </p>\n                <p>\n                  <span className=\"font-medium\">Pause Frames:</span>{\" \"}\n                  {formData.pauseFrames.length} added\n                </p>\n                <p>\n                  <span className=\"font-medium\">CTA Buttons:</span>{\" \"}\n                  {formData.ctaButtons.length} added\n                </p>\n                <p>\n                  <span className=\"font-medium\">Banners:</span>{\" \"}\n                  {formData.banners?.left && formData.banners?.right\n                    ? \"Left and Right\"\n                    : formData.banners?.left\n                    ? \"Left only\"\n                    : formData.banners?.right\n                    ? \"Right only\"\n                    : \"None\"}\n                </p>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"mt-6\">\n            <button\n              onClick={generateAd}\n              disabled={generating}\n              className={`w-full py-3 rounded-md font-medium ${\n                generating\n                  ? \"bg-gray-400 cursor-not-allowed\"\n                  : \"bg-green-600 hover:bg-green-700 text-white\"\n              }`}\n            >\n              {generating ? \"Generating...\" : \"Generate Ad\"}\n            </button>\n          </div>\n\n          {error && (\n            <div className=\"mt-4 bg-red-50 text-red-600 p-3 rounded-md text-center\">\n              {error}\n            </div>\n          )}\n\n          <div className=\"mt-6\">\n            <h3 className=\"text-lg font-medium text-gray-800 mb-4\">Result</h3>\n\n            {!result ? (\n              <div className=\"bg-gray-50 rounded-lg h-64 flex items-center justify-center\">\n                <div className=\"text-center text-gray-500\">\n                  {generating ? (\n                    <div className=\"space-y-3\">\n                      <svg\n                        className=\"animate-spin h-8 w-8 text-blue-500 mx-auto\"\n                        xmlns=\"http://www.w3.org/2000/svg\"\n                        fill=\"none\"\n                        viewBox=\"0 0 24 24\"\n                      >\n                        <circle\n                          className=\"opacity-25\"\n                          cx=\"12\"\n                          cy=\"12\"\n                          r=\"10\"\n                          stroke=\"currentColor\"\n                          strokeWidth=\"4\"\n                        ></circle>\n                        <path\n                          className=\"opacity-75\"\n                          fill=\"currentColor\"\n                          d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\n                        ></path>\n                      </svg>\n                      <p>Generating your playable ad...</p>\n                    </div>\n                  ) : (\n                    <div className=\"space-y-3\">\n                      <svg\n                        className=\"h-12 w-12 text-gray-400 mx-auto\"\n                        fill=\"none\"\n                        stroke=\"currentColor\"\n                        viewBox=\"0 0 24 24\"\n                        xmlns=\"http://www.w3.org/2000/svg\"\n                      >\n                        <path\n                          strokeLinecap=\"round\"\n                          strokeLinejoin=\"round\"\n                          strokeWidth={1.5}\n                          d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"\n                        />\n                      </svg>\n                      <p>Click \"Generate Ad\" to create your playable ad</p>\n                    </div>\n                  )}\n                </div>\n              </div>\n            ) : (\n              <div className=\"space-y-4\">\n                {result.previewUrl && (\n                  <div>\n                    <h4 className=\"text-sm font-medium text-gray-700 mb-2\">Preview</h4>\n                    <div className=\"bg-black rounded-lg overflow-hidden\">\n                      <video\n                        src={result.previewUrl}\n                        className=\"w-full h-auto\"\n                        controls\n                      />\n                    </div>\n                  </div>\n                )}\n                \n                <div>\n                  <h4 className=\"text-sm font-medium text-gray-700 mb-2\">Download</h4>\n                  <a\n                    href={result.fileUrl}\n                    download=\"playable-ad.zip\"\n                    className=\"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors\"\n                  >\n                    <svg\n                      className=\"h-4 w-4 mr-2\"\n                      fill=\"none\"\n                      stroke=\"currentColor\"\n                      viewBox=\"0 0 24 24\"\n                      xmlns=\"http://www.w3.org/2000/svg\"\n                    >\n                      <path\n                        strokeLinecap=\"round\"\n                        strokeLinejoin=\"round\"\n                        strokeWidth={2}\n                        d=\"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"\n                      />\n                    </svg>\n                    Download Ad Package\n                  </a>\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n      \n      <div className=\"flex justify-between pt-6\">\n        <button\n          onClick={prevStep}\n          className=\"px-6 py-2 rounded-md text-gray-700 font-medium border border-gray-300 hover:bg-gray-50\"\n        >\n          Back\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default ExportAd; "],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 5976, "column": 0}, "map": {"version":3,"sources":["file:///Users/ryonluo/Code/PlayableAllMaker/frontend/app/create/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport Link from \"next/link\";\nimport StepIndicator from \"@/components/StepIndicator\";\nimport VideoUpload from \"@/components/steps/VideoUpload\";\nimport PauseFrames from \"@/components/steps/PauseFrames\";\nimport CTAButtons from \"@/components/steps/CTAButtons\";\nimport BannerUpload from \"@/components/steps/BannerUpload\";\nimport ExportAd from \"@/components/steps/ExportAd\";\n\nconst steps = [\n  { id: 1, title: \"Upload Video\" },\n  { id: 2, title: \"Add Pause Frames\" },\n  { id: 3, title: \"Add CTA Buttons\" },\n  { id: 4, title: \"Add Banners (Optional)\" },\n  { id: 5, title: \"Export\" },\n];\n\nexport default function CreatePage() {\n  const [currentStep, setCurrentStep] = useState(1);\n  const [formData, setFormData] = useState({\n    video: null,\n    pauseFrames: [],\n    ctaButtons: [],\n    banners: {\n      left: null,\n      right: null,\n    },\n    platform: \"google\",\n  });\n\n  const updateFormData = (field: string, value: any) => {\n    setFormData((prev) => ({\n      ...prev,\n      [field]: value,\n    }));\n  };\n\n  const nextStep = () => {\n    if (currentStep < steps.length) {\n      setCurrentStep(currentStep + 1);\n    }\n  };\n\n  const prevStep = () => {\n    if (currentStep > 1) {\n      setCurrentStep(currentStep - 1);\n    }\n  };\n\n  const renderStep = () => {\n    switch (currentStep) {\n      case 1:\n        return (\n          <VideoUpload\n            formData={formData}\n            updateFormData={updateFormData}\n            nextStep={nextStep}\n          />\n        );\n      case 2:\n        return (\n          <PauseFrames\n            formData={formData}\n            updateFormData={updateFormData}\n            nextStep={nextStep}\n            prevStep={prevStep}\n          />\n        );\n      case 3:\n        return (\n          <CTAButtons\n            formData={formData}\n            updateFormData={updateFormData}\n            nextStep={nextStep}\n            prevStep={prevStep}\n          />\n        );\n      case 4:\n        return (\n          <BannerUpload\n            formData={formData}\n            updateFormData={updateFormData}\n            nextStep={nextStep}\n            prevStep={prevStep}\n          />\n        );\n      case 5:\n        return (\n          <ExportAd\n            formData={formData}\n            updateFormData={updateFormData}\n            prevStep={prevStep}\n          />\n        );\n      default:\n        return null;\n    }\n  };\n\n  return (\n    <div className=\"container mx-auto px-4 py-8\">\n      <div className=\"mb-8\">\n        <Link\n          href=\"/\"\n          className=\"text-blue-600 hover:text-blue-800 flex items-center\"\n        >\n          <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            className=\"h-5 w-5 mr-1\"\n            viewBox=\"0 0 20 20\"\n            fill=\"currentColor\"\n          >\n            <path\n              fillRule=\"evenodd\"\n              d=\"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z\"\n              clipRule=\"evenodd\"\n            />\n          </svg>\n          Back to Home\n        </Link>\n      </div>\n\n      <div className=\"mb-8\">\n        <h1 className=\"text-3xl font-bold text-gray-800 mb-4\">\n          Create Playable Ad\n        </h1>\n        <StepIndicator steps={steps} currentStep={currentStep} />\n      </div>\n\n      <div className=\"bg-white rounded-lg shadow-md p-6\">\n        {renderStep()}\n      </div>\n    </div>\n  );\n} "],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AATA;;;;;;;;;AAWA,MAAM,QAAQ;IACZ;QAAE,IAAI;QAAG,OAAO;IAAe;IAC/B;QAAE,IAAI;QAAG,OAAO;IAAmB;IACnC;QAAE,IAAI;QAAG,OAAO;IAAkB;IAClC;QAAE,IAAI;QAAG,OAAO;IAAyB;IACzC;QAAE,IAAI;QAAG,OAAO;IAAS;CAC1B;AAEc,SAAS;;IACtB,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yKAAQ,EAAC;IAC/C,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAC;QACvC,OAAO;QACP,aAAa,EAAE;QACf,YAAY,EAAE;QACd,SAAS;YACP,MAAM;YACN,OAAO;QACT;QACA,UAAU;IACZ;IAEA,MAAM,iBAAiB,CAAC,OAAe;QACrC,YAAY,CAAC,OAAS,CAAC;gBACrB,GAAG,IAAI;gBACP,CAAC,MAAM,EAAE;YACX,CAAC;IACH;IAEA,MAAM,WAAW;QACf,IAAI,cAAc,MAAM,MAAM,EAAE;YAC9B,eAAe,cAAc;QAC/B;IACF;IAEA,MAAM,WAAW;QACf,IAAI,cAAc,GAAG;YACnB,eAAe,cAAc;QAC/B;IACF;IAEA,MAAM,aAAa;QACjB,OAAQ;YACN,KAAK;gBACH,qBACE,6LAAC,iJAAW;oBACV,UAAU;oBACV,gBAAgB;oBAChB,UAAU;;;;;;YAGhB,KAAK;gBACH,qBACE,6LAAC,iJAAW;oBACV,UAAU;oBACV,gBAAgB;oBAChB,UAAU;oBACV,UAAU;;;;;;YAGhB,KAAK;gBACH,qBACE,6LAAC,gJAAU;oBACT,UAAU;oBACV,gBAAgB;oBAChB,UAAU;oBACV,UAAU;;;;;;YAGhB,KAAK;gBACH,qBACE,6LAAC,kJAAY;oBACX,UAAU;oBACV,gBAAgB;oBAChB,UAAU;oBACV,UAAU;;;;;;YAGhB,KAAK;gBACH,qBACE,6LAAC,8IAAQ;oBACP,UAAU;oBACV,gBAAgB;oBAChB,UAAU;;;;;;YAGhB;gBACE,OAAO;QACX;IACF;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC,0KAAI;oBACH,MAAK;oBACL,WAAU;;sCAEV,6LAAC;4BACC,OAAM;4BACN,WAAU;4BACV,SAAQ;4BACR,MAAK;sCAEL,cAAA,6LAAC;gCACC,UAAS;gCACT,GAAE;gCACF,UAAS;;;;;;;;;;;wBAEP;;;;;;;;;;;;0BAKV,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAG,WAAU;kCAAwC;;;;;;kCAGtD,6LAAC,0IAAa;wBAAC,OAAO;wBAAO,aAAa;;;;;;;;;;;;0BAG5C,6LAAC;gBAAI,WAAU;0BACZ;;;;;;;;;;;;AAIT;GArHwB;KAAA","debugId":null}}]
}