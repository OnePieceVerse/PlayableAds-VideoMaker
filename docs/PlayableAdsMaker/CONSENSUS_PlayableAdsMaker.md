# Playable Ads Maker - 共识文档

## 明确需求描述

### 核心功能

1. **多步骤广告制作流程**：
   - 步骤一：上传视频
   - 步骤二：添加暂停帧（基于上传的视频）
   - 步骤三：添加CTA按钮（基于上传的视频）
   - 步骤四（可选）：上传Banner图（适配横屏）
   - 步骤五：导出（生成HTML或ZIP文件）

2. **视频处理**：
   - 支持常见视频格式（MP4, WebM等）
   - 视频预览功能
   - 视频时间点选择

3. **互动元素配置**：
   - 暂停帧设置（时间点、引导图片、位置）
   - CTA按钮设置（全程显示/结尾显示、图片、位置）
   - Banner图设置（左侧/右侧）

4. **平台适配**：
   - 支持多个广告平台（Google、Facebook、Applovin等）
   - 根据不同平台要求生成相应格式文件

5. **响应式设计**：
   - 支持PC端和移动端自适应布局
   - 保持良好的用户体验

### 技术约束

1. **前端技术栈**：
   - Next.js框架
   - Tailwind CSS样式框架
   - 响应式设计

2. **后端技术栈**：
   - Python
   - FastAPI框架
   - 文件处理能力

3. **数据流向**：
   - 前端收集用户输入（视频、图片、参数）
   - 前端发送数据到后端
   - 后端处理数据并生成JSON配置
   - 后端生成HTML或ZIP文件并返回给前端
   - 前端提供下载功能

## 技术实现方案

### 前端实现

1. **项目结构**：
   - 使用Next.js 13+（App Router）
   - 采用TypeScript进行类型检查
   - 使用Tailwind CSS进行样式设计

2. **页面组件**：
   - 主页面：展示多步骤表单
   - 步骤组件：每个步骤对应一个组件
   - 预览组件：实时预览效果
   - 导出组件：处理文件下载

3. **状态管理**：
   - 使用React Context或Redux管理全局状态
   - 保存用户在各步骤的输入

4. **文件处理**：
   - 使用现代文件上传库处理视频和图片上传
   - 客户端预览功能

5. **API通信**：
   - 使用Fetch API或Axios进行后端通信
   - 处理文件上传和下载

### 后端实现

1. **API设计**：
   - `/upload`：处理文件上传
   - `/generate`：生成广告文件
   - `/preview`：提供预览功能

2. **数据处理**：
   - 接收前端传来的参数和文件
   - 处理并验证数据
   - 生成标准JSON配置

3. **文件生成**：
   - 根据JSON配置生成HTML文件
   - 打包资源为ZIP文件
   - 适配不同平台要求

4. **错误处理**：
   - 提供清晰的错误信息
   - 处理异常情况

## 集成方案

1. **前后端通信**：
   - RESTful API接口
   - JSON格式数据交换
   - 文件上传采用multipart/form-data

2. **部署架构**：
   - 前端部署到静态网站托管服务
   - 后端部署到支持Python的服务器
   - 可选CDN加速静态资源

## 任务边界限制

1. **不包含在内的功能**：
   - 用户账户系统
   - 项目保存和恢复
   - 复杂的视频编辑功能
   - 高级动画效果

2. **技术限制**：
   - 视频格式限制为常见web支持格式
   - 视频大小限制（建议不超过50MB）
   - 图片格式限制为PNG、JPG、WebP等web格式

## 验收标准

### 功能验收

1. **上传视频**：
   - 能够成功上传视频文件
   - 能够预览上传的视频
   - 显示视频基本信息（时长、大小等）

2. **暂停帧设置**：
   - 能够设置暂停时间点
   - 能够上传引导图片
   - 能够设置引导图片位置
   - 能够预览暂停效果

3. **CTA按钮设置**：
   - 能够设置按钮显示类型（全程/结尾）
   - 能够上传按钮图片
   - 能够设置按钮位置
   - 能够设置显示时间（对于结尾显示）

4. **Banner图设置**：
   - 能够上传左右两侧Banner图
   - 能够预览效果

5. **导出功能**：
   - 能够选择目标平台
   - 能够生成预览
   - 能够下载生成的文件

### 技术验收

1. **响应式设计**：
   - PC端显示正常
   - 移动端显示正常
   - 各组件适应不同屏幕尺寸

2. **性能要求**：
   - 页面加载时间控制在3秒内
   - 文件上传有进度提示
   - 生成文件的过程有状态提示

3. **兼容性要求**：
   - 支持主流现代浏览器（Chrome、Firefox、Safari、Edge）
   - 不要求支持IE

4. **安全要求**：
   - 文件上传有类型验证
   - 防止恶意文件上传
   - 适当的错误处理和提示 